(()=>{const e=window.sophi.contexts.get.context;window.sophi.data.environment.clientConfigVersion="1.1";const t=e=>{const t=['[class*="MediaMaximizer__container"]','[class*="SpacingContainer"]','[class*="SiteFooter__content-container"]','[class*="VideoHub__container"]','[class*="NavBar__nav___"]','[class*="dianomi_wrapper"]','[class*="ArticleHeader__container"]','[class*="ArticleBody__container"]',"div"];let i,r=0;for(;!i&&r<=t.length&&(i=e.closest(t[r]),r++,!i););return i},i={},r=(e,t,r,o,s)=>{try{const s=o.className.split("__")[0];if(!e.isCurated&&(["SiteHeader","SiteFooter","NavBar","ArticleBody","ArticleHeader"].includes(s)&&(e.feature=s),"SpacingContainer"===s)){const t=o.querySelector("[class*=heading]:not([class*=MediaStoryCard])");t&&!/story/.test(t.parentElement.className)?e.feature=t.textContent:e.feature="feature"}const n=e.label.split("\n");if(n.length>=2&&(e.label=n[1]),"MediaMaximizer"===s){const r=(t.target||{}).tagName?t.target:t||{};if(i[r.href])return;const o=r.closest("[data-flip-id]");if(!o)return;{const t=o.getAttribute("data-flip-id");if(t&&/\d+-\d+/.test(t)){const[o]=t.split("-");e.position=Number(o)+1,i[r.href]=!0}}}const a=o.querySelector('[class*="step-indicator"]');a&&(e.tab=+a.textContent.split(" ")[0]),e.feature&&(e.feature=sophi.itemImpression.dedupeFeatureName(e.feature.toLowerCase(),o));const c=["feature","label","position","total","uri","top","left","height","width","tab","isCurated"],l=Object.fromEntries(Object.entries(e).filter((([e])=>c.includes(e))));if(r)return l;sophi.itemImpression.linkData.push(l)}catch(e){}};sophi.itemImpression={...sophi.itemImpression,properties:{featureProperties:sophi.itemImpression.properties.featureProperties,source:"hybrid",parentElement:t,data:r},linkData:[],linkProcessed:[]};const o=window.sophiGlobalVariable;window[o].contexts.extract.click=i=>{try{let o=sophi.itemImpression.properties.featureProperties(i,!0,!0);o=r(o,i,!0,t(i)),o.type=o.type||"A"===i.nodeName?"link":"BUTTON"===i.nodeName?"button":void 0;const s={feature:o.feature,position:o.position,linkCount:o.total,label:o.label,type:o.type,isCurated:o.isCurated};return e("click",{clickElement:i,overrideStoredContext:!0},s)}catch(e){sophi.log("Click data extraction failed","error","sophi/config.js",e,{element:i})}};const s=window.sophi.settings;if(s.enableClickTracking){const e=s.trackerName,t="function"==typeof s.clickFilter?{filter:s.clickFilter}:null;window[e](`enableLinkClickTracking:${e}`,t,!0,!0,[window.sophi.contexts.extract.click])}window.sophi.startItemImpression()})();