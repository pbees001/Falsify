(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1e3:function(e,t,r){"use strict";r(67);var n=r(4),i=r.n(n),o=r(5),a=r.n(o),s=r(7),c=r.n(s),u=r(20),l=r.n(u),d=r(21),p=r.n(d),f=r(10),h=r.n(f),v=r(1),y=r.n(v),E=r(0),g=r(674),b=r(591),O=r(104),m=r.n(O);m.a.string,m.a.func,m.a.object,m.a.bool,m.a.number,m.a.string,m.a.oneOf(["media_entity","gif","vmap","broadcast"]),m.a.bool,m.a.object,m.a.node,m.a.shape({objectFitVideo:m.a.oneOf(b.d),playerHandlesRotations:m.a.bool}),m.a.number,m.a.bool,m.a.string,m.a.shape({getValue:m.a.func}),m.a.bool,m.a.object,m.a.bool,m.a.bool,m.a.bool,m.a.instanceOf(Date),m.a.string,m.a.bool,m.a.number,m.a.object,m.a.string,m.a.string,m.a.bool,m.a.object,m.a.string,m.a.string,m.a.func,m.a.bool,m.a.bool,m.a.object,m.a.arrayOf(m.a.shape({src:m.a.string,type:m.a.string})),m.a.object,m.a.object,m.a.oneOfType([m.a.string,m.a.number]),m.a.string;function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var i=h()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p()(this,r)}}var P={base:{height:"100%",position:"relative",transform:"translateZ(0)",width:"100%"},wrapper:{height:"100%",position:"absolute",width:"100%"}},I=function(e){l()(r,e);var t=T(r);function r(e){var n;return i()(this,r),n=t.call(this,e),y()(c()(n),"_setVideoRef",(function(e){e&&n.videoPlayer.attach(e)})),y()(c()(n),"_setContainerRef",(function(e){n.containerDomElement=e})),y()(c()(n),"_renderCustomOverlay",(function(){if(n.props.customOverlay)return n.props.customOverlay})),n.videoPlayer=g.a.createPlayer({source:n.props.videoId,videoConfig:{contentId:n.props.contentId,contentType:n.props.contentType,cta:n.props.cta,durationMs:n.props.durationMs,expandedUrl:n.props.expandedUrl,eventId:n.props.eventId,mediaAvailability:n.props.mediaAvailability,publisherId:n.props.publisherId,poster:n.props.poster,loop:n.props.loop,shouldLoadTranslations:n.props.shouldLoadTranslations,variants:n.props.variants,viewCount:n.props.viewCount,vmapUrl:n.props.vmapUrl},httpClient:n.props.httpClient,twitterAuthedHttpClient:n.props.twitterAuthedHttpClient,options:{accessibilityLabel:n.props.accessibilityLabel,autoplay:n.props.autoplay,adProvider:n.props.adProvider,analytics:n.props.analytics,bitrateCap:n.props.bitrateCap,enablePiP:n.props.enablePiP,enableVideoPlayerCaptionRendering:n.props.enableVideoPlayerCaptionRendering,featureProvider:n.props.featureProvider,hlsjsVersion:n.props.hlsjsVersion,includeBroadcastEventAssociation:n.props.includeBroadcastEventAssociation,initiallyMuted:n.props.initiallyMuted,initiallyMutedCaptions:n.props.initiallyMutedCaptions,intentToPlayTime:n.props.intentToPlayTime,language:n.props.language,maxLoopCount:n.props.maxLoopCount,objectFitVideo:n.props.displayOptions.objectFitVideo,playbackSessionId:n.props.playbackSessionId,playerHandlesRotations:n.props.displayOptions.playerHandlesRotations,precache:n.props.precache,promotedContext:n.props.promotedContext,requestedTimecode:n.props.requestedTimecode,showControls:!1,showGeolocationPrompt:n.props.geolocationPrompt,shouldRetryAutoplayMuted:n.props.shouldRetryAutoplayMuted,videoEl:n.props.videoEl}}),n.props.setPlayerApi&&n.props.setPlayerApi(n.videoPlayer),n}return a()(r,[{key:"componentWillUnmount",value:function(){try{this.videoPlayer.teardown()}catch(e){}}},{key:"render",value:function(){return E.createElement("div",{ref:this._setContainerRef,style:P.base},E.createElement("div",{ref:this._setVideoRef,style:P.wrapper}),this._renderCustomOverlay())}}]),r}(E.PureComponent);y()(I,"defaultProps",{displayOptions:{},variants:[]}),I.propTypes={};t.a=I},1030:function(e,t,r){"use strict";r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n),o=r(569),a=r(570),s=r(84);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)("svg",u(u({},e),{},{accessibilityHidden:void 0===e.accessibilityLabel,style:[a.a.root,e.style],viewBox:"0 0 24 24"}),o.createElement("g",null,o.createElement("path",{d:"M13.414 12l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L12 10.586 6.207 4.793c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L10.586 12l-5.793 5.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L12 13.414l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L13.414 12z"})))};l.metadata={width:24,height:24},t.a=l},582:function(e,t,r){"use strict";t.a={BROADCAST_REQUEST_ERROR:"BROADCAST_REQUEST_ERROR",BROADCAST_ENDED_NO_REPLAY:"BROADCAST_ENDED_NO_REPLAY",BROADCAST_NOT_FOUND:"BROADCAST_NOT_FOUND",CONFIG_USER_DATA_NETWORK_ERROR:"CONFIG_USER_DATA_NETWORK_ERROR",CONFIG_NETWORK_ERROR:"CONFIG_NETWORK_ERROR",DMCA_TAKEDOWN_ERROR:"DMCA_TAKEDOWN_ERROR",EUROPEAN_COPYRIGHT_VIOLATION:"EUROPEAN_COPYRIGHT_VIOLATION",LIVE_PARSE_ERROR:"LIVE_PARSE_ERROR",LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID:"LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID",LIVE_STREAM_ACQUISITION_NETWORK_ERROR:"LIVE_STREAM_ACQUISITION_NETWORK_ERROR",LIVE_VIDEO_GEOBLOCK_ERROR:"LIVE_VIDEO_GEOBLOCK_ERROR",LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:"LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR",LIVE_VIDEO_GEOLOCATION_PROMPT:"LIVE_VIDEO_GEOLOCATION_PROMPT",LIVE_VIDEO_NO_COOKIES_ERROR:"LIVE_VIDEO_NO_COOKIES_ERROR",MEDIA_NOT_SUPPORTED:"MEDIA_NOT_SUPPORTED",MEDIA_SRC_INVALID_ERROR:"MEDIA_SRC_INVALID_ERROR",MEDIA_ABORTED:"MEDIA_ABORTED",MEDIA_NETWORK_ERROR:"MEDIA_NETWORK_ERROR",MEDIA_DECODE_ERROR:"MEDIA_DECODE_ERROR",MEDIA_GEOBLOCK_ERROR:"MEDIA_GEOBLOCK_ERROR",MEDIA_TEARDOWN_ERROR:"MEDIA_TEARDOWN_ERROR",MEDIA_UNKNOWN_CODE_ERROR:"MEDIA_UNKNOWN_CODE_ERROR",ORIGINAL_CONTEXT_DELETED:"ORIGINAL_CONTEXT_DELETED",PICTURE_IN_PICTURE_ERROR:"PICTURE_IN_PICTURE_ERROR",UNSUPPORTED_TYPE:"UNSUPPORTED_TYPE",VMAP_NETWORK_ERROR:"VMAP_NETWORK_ERROR",VMAP_PARSE_ERROR:"VMAP_PARSE_ERROR"}},587:function(e,t,r){"use strict";r.d(t,"n",(function(){return n})),r.d(t,"j",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"m",(function(){return a})),r.d(t,"u",(function(){return s})),r.d(t,"Y",(function(){return c})),r.d(t,"r",(function(){return u})),r.d(t,"V",(function(){return l})),r.d(t,"x",(function(){return d})),r.d(t,"bb",(function(){return p})),r.d(t,"E",(function(){return f})),r.d(t,"ib",(function(){return h})),r.d(t,"D",(function(){return v})),r.d(t,"hb",(function(){return y})),r.d(t,"q",(function(){return E})),r.d(t,"U",(function(){return g})),r.d(t,"z",(function(){return b})),r.d(t,"db",(function(){return O})),r.d(t,"v",(function(){return m})),r.d(t,"Z",(function(){return T})),r.d(t,"l",(function(){return P})),r.d(t,"R",(function(){return I})),r.d(t,"A",(function(){return R})),r.d(t,"eb",(function(){return _})),r.d(t,"H",(function(){return S})),r.d(t,"lb",(function(){return w})),r.d(t,"w",(function(){return C})),r.d(t,"ab",(function(){return k})),r.d(t,"d",(function(){return A})),r.d(t,"L",(function(){return D})),r.d(t,"y",(function(){return j})),r.d(t,"cb",(function(){return L})),r.d(t,"F",(function(){return U})),r.d(t,"jb",(function(){return N})),r.d(t,"G",(function(){return x})),r.d(t,"kb",(function(){return M})),r.d(t,"h",(function(){return F})),r.d(t,"O",(function(){return V})),r.d(t,"B",(function(){return B})),r.d(t,"fb",(function(){return G})),r.d(t,"p",(function(){return H})),r.d(t,"T",(function(){return Q})),r.d(t,"o",(function(){return K})),r.d(t,"S",(function(){return J})),r.d(t,"e",(function(){return W})),r.d(t,"M",(function(){return Y})),r.d(t,"C",(function(){return q})),r.d(t,"gb",(function(){return z})),r.d(t,"b",(function(){return X})),r.d(t,"J",(function(){return Z})),r.d(t,"c",(function(){return $})),r.d(t,"K",(function(){return ee})),r.d(t,"i",(function(){return te})),r.d(t,"P",(function(){return re})),r.d(t,"a",(function(){return ne})),r.d(t,"I",(function(){return ie})),r.d(t,"g",(function(){return oe})),r.d(t,"N",(function(){return ae})),r.d(t,"t",(function(){return se})),r.d(t,"X",(function(){return ce})),r.d(t,"s",(function(){return ue})),r.d(t,"W",(function(){return le})),r.d(t,"k",(function(){return de})),r.d(t,"Q",(function(){return pe}));var n={PAUSE_REQUESTED:"PAUSE_REQUESTED",PLAY_REQUESTED:"PLAY_REQUESTED"},i={MUTE_REQUESTED:"MUTE_REQUESTED",UNMUTE_REQUESTED:"UNMUTE_REQUESTED"},o={CAPTIONS_ON_REQUESTED:"CAPTIONS_ON_REQUESTED",CAPTIONS_OFF_REQUESTED:"CAPTIONS_OFF_REQUESTED",CAPTIONS_RESET_REQUESTED:"CAPTIONS_RESET_REQUESTED"},a={PICTURE_IN_PICTURE_ON_REQUESTED:"PICTURE_IN_PICTURE_ON_REQUESTED",PICTURE_IN_PICTURE_OFF_REQUESTED:"PICTURE_IN_PICTURE_OFF_REQUESTED"},s="REQUEST_PLAY",c=function(e){return{type:s,playerId:e}},u="REQUEST_PAUSE",l=function(e){return{type:u,playerId:e}},d="REQUEST_REPLAY",p=function(e){return{type:d,playerId:e}},f="VIDEO_PLAYED",h=function(e){return{type:f,playerId:e}},v="VIDEO_PAUSED",y=function(e){return{type:v,playerId:e}},E="REQUEST_MUTE",g=function(e){return{type:E,playerId:e}},b="REQUEST_UNMUTE",O=function(e){return{type:b,playerId:e}},m="REQUEST_PLAYBACK_RATE_CHANGE",T=function(e,t){return{type:m,playbackRate:t,playerId:e}},P="PLAYBACK_RATE_CHANGED",I=function(e,t){return{type:P,playbackRate:t,playerId:e}},R="REQUEST_VOLUME_CHANGE",_=function(e,t){return{type:R,volume:t,playerId:e}},S="VIDEO_VOLUME_CHANGED",w=function(e,t,r){return{type:S,isMuted:t,volume:r,playerId:e}},C="REQUEST_PLAYBACK_TIME_RANGE",k=function(e,t,r){return{type:C,startTimeS:t,endTimeS:r,playerId:e}},A="CANCEL_PLAYBACK_TIME_RANGE",D=function(e){return{type:A,playerId:e}},j="REQUEST_SCRUB_TO_FRACTION",L=function(e,t){return{type:j,fraction:t,playerId:e}},U="VIDEO_SEEKED",N=function(e){return{type:U,playerId:e}},x="VIDEO_SEEKING",M=function(e){return{type:x,playerId:e}},F="HIDE_CONTROLS",V=function(e){return{type:F,playerId:e}},B="SHOW_CONTROLS",G=function(e){return{type:B,playerId:e}},H="REQUEST_CAPTIONS_ON",Q=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:H,isUserSet:t,playerId:e}},K="REQUEST_CAPTIONS_OFF",J=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:K,isUserSet:t,playerId:e}},W="CAPTIONS_TOGGLED",Y=function(e,t){return{type:W,areCaptionsShown:t,playerId:e}},q="UPDATE_VISIBILITY",z=function(e,t,r,n){return{type:q,playerId:e,percentVisible:t,percentOfViewportOccupied:r,sizesInfo:n}},X="CALL_TO_ACTION_CLICKED",Z=function(e){return{type:X,playerId:e}},$="CALL_TO_ACTION_IMPRESSION",ee=function(e){return{type:$,playerId:e}},te="LIVE_CLICKTHROUGH_CLICKED",re=function(e){return{type:te,playerId:e}},ne="AUTOPLAY_DISABLED",ie=function(e){return{type:ne,playerId:e}},oe="DATA_USAGE_COLLECTED",ae=function(e,t){return{type:oe,playerId:e,bytes:t}},se="REQUEST_PICTURE_IN_PICTURE_ON",ce=function(e){return{type:se,playerId:e}},ue="REQUEST_PICTURE_IN_PICTURE_OFF",le=function(e){return{type:ue,playerId:e}},de="PICTURE_IN_PICTURE_MODE_TOGGLED",pe=function(e,t){return{type:de,playerId:e,inPiPMode:t}}},589:function(e,t,r){"use strict";r.d(t,"c",(function(){return W})),r.d(t,"e",(function(){return q})),r.d(t,"a",(function(){return X})),r.d(t,"f",(function(){return Z})),r.d(t,"b",(function(){return $})),r.d(t,"i",(function(){return te})),r.d(t,"g",(function(){return re})),r.d(t,"j",(function(){return ne})),r.d(t,"d",(function(){return ie}));r(23),r(45),r(40),r(17),r(18),r(46);var n=r(41),i=r.n(n),o=r(65),a=r.n(o),s=r(1),c=r.n(s),u=(r(326),r(30),r(36),r(611)),l=r(808),d=r(644),p=(r(325),r(60),r(80),r(4)),f=r.n(p),h=r(5),v=r.n(h),y=r(582),E=r(610),g=r(622);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(){function e(t){f()(this,e),this.httpClient=t}return v()(e,[{key:"load",value:function(e){return this.httpClient?function(e,t){if(!T(t))return Promise.resolve(t);var r=t.source.id,n=t.source.mediaKey,i=Object(E.d)(t,0),o=function(e){var t=e.broadcastId;return{broadcastId:t,contentId:e.mediaKey,contentType:"broadcast",displayType:"content",expandedUrl:"https://twitter.com/i/spaces/".concat(t),playbackType:"application/x-mpegURL",shouldLoop:!1,unavailableInPeriscope:!0}}({broadcastId:r,mediaKey:n});return Promise.resolve(O(O({},t),{},{client:"web",tracks:[O(O(O({},i),o),{},{id:0,isLive:!0})],currentTrackId:0,source:O(O({},t.source),{},{trackId:0})}))}(this.httpClient,e):Promise.reject(y.a.MEDIA_TEARDOWN_ERROR)}}]),e}(),T=function(e){return e.source&&e.source.type===g.a.AUDIO_SPACE},P=r(677),I=r(57),R=r.n(I);r(19),r(103);var _=/^[0-9]{1,6}(\.[0-9]+)?$/,S=/^([0-9]{0,3}[hH])?([0-9]{0,2}[mM])?([0-9]{0,6}[sS])?$/,w=r(729);r(64),r(96),r(50);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A={features:{fatalErrorRetryMax:3},translations:{}},D=function(){function e(t,r){f()(this,e),this.httpClient=t,this.logger=r}return v()(e,[{key:"load",value:function(e,t){var r=this;if(!this.httpClient)return Promise.reject(y.a.MEDIA_TEARDOWN_ERROR);var n=e.videoConfig,o=i()(e,["videoConfig"]);return(n&&(n.vmapUrl||e.videoConfig.variants&&e.videoConfig.variants.length>0)?this.loadStaticConfigState(n,e.source):this.loadDynamicConfigState(e.source,n,t)).then((function(e){return r.convertConfigStateToPlayerState(e,o,t)}))}},{key:"loadStaticConfigState",value:function(e,t){var r=this,n=function(){try{return JSON.parse(window.sessionStorage.getItem("TwitterVideoPlayerUserConfig"))}catch(e){}}(),i={eventId:e.eventId,posterImage:e.poster,track:{contentId:e.contentId,contentType:e.contentType,cta:e.cta,durationMs:e.durationMs,expandedUrl:e.expandedUrl,mediaAvailability:e.mediaAvailability,publisherId:e.publisherId,shouldLoop:e.loop,variants:e.variants,viewCount:e.viewCount,vmapUrl:e.vmapUrl}};if(!e.shouldLoadTranslations||!this._shouldLoadStaticConfig(t))return Promise.resolve(k(k({},A),i));var o=this.httpClient.dispatch({method:"GET",path:"/1.1/videos/static/config.json",host:"https://api.twitter.com"}).then((function(e){if(200!==e.status)throw new Error("".concat(y.a.CONFIG_USER_DATA_NETWORK_ERROR,":").concat(e.status));var t=JSON.parse(e.body);return function(e){try{window.sessionStorage.setItem("TwitterVideoPlayerUserConfig",JSON.stringify(e))}catch(e){}}(t),t}),(function(){throw new Error(y.a.CONFIG_USER_DATA_NETWORK_ERROR)})).catch((function(e){return r.logger.log("ConfigurationLoader","failed to load static configuration: ".concat(e)),k({},A)}));return(n?Promise.resolve(n):o).then((function(e){var t=e.features,r=e.translations;return k(k({},i),{},{features:t,translations:r})}))}},{key:"loadDynamicConfigState",value:function(e,t,r){if(e.type===g.a.BROADCAST&&t&&!t.shouldLoadTranslations||e.type===g.a.AUDIO_SPACE)return Promise.resolve(k({},A));try{return this.httpClient.dispatch({method:"GET",path:this.getApiEndpointForPlayerSource(e),host:"https://api.twitter.com",params:{bitrate_cap:r.bitrateCap}}).then((function(e){if(200!==e.status)throw new Error("".concat(y.a.CONFIG_NETWORK_ERROR,":").concat(e.status));var r=JSON.parse(e.body);return t&&t.poster&&(r.posterImage=t.poster),r}),(function(){throw new Error(y.a.CONFIG_NETWORK_ERROR)}))}catch(e){return Promise.reject(e)}}},{key:"convertConfigStateToPlayerState",value:function(e,t,r){var n,o,a=e.track,s=e.translations,c=i()(e,["track","translations"]),u=r.reloadTimecode,l=function(e){if(_.test(e))return+e;var t=S.exec(e);if(t&&t[0]){var r=R()(t,4),n=r[1],i=r[2],o=r[3],a=0;return n&&(a+=3600*+n.slice(0,-1)),i&&(a+=60*+i.slice(0,-1)),o&&(a+=+o.slice(0,-1)),a}}(r.requestedTimecode),d=l>0||0===l?l:-1;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e}(s),a&&(o=a.mediaAvailability,r.maxLoopCount&&(a.maxLoopCount=r.maxLoopCount,a.loopCounter=0),a.variants&&a.variants.length>0?n=a.variants:a.playbackUrl&&a.playbackType&&(n=[{src:a.playbackUrl,type:a.playbackType}])),Object(w.a)()&&(n=Object(E.a)(n));var p,f=Object(P.a)(o);if(f)switch(f){case y.a.ORIGINAL_CONTEXT_DELETED:case y.a.DMCA_TAKEDOWN_ERROR:throw new Error(f);case y.a.EUROPEAN_COPYRIGHT_VIOLATION:throw(p=new Error(f)).copyrightHolder=o.unavailability_info.copyright_violation.copyright_holder_name,p}return k(k(k({},t),c),{},{tracks:[k(k({},a),{},{id:0,displayType:"content",requestedTimecode:d,reloadTimecode:u,rotation:0,variants:n,currentVariantIndex:0})],currentTrackId:0,source:k(k({},t.source),{},{trackId:0}),mediaAvailability:o})}},{key:"getApiEndpointForPlayerSource",value:function(e){switch(e.type){case g.a.TWEET:var t=e.index>0?"/".concat(e.index):"";return"".concat("/1.1/videos/","tweet/config/").concat(e.id).concat(t,".json");case g.a.AUDIO_SPACE:case g.a.BROADCAST:return"".concat("/1.1/videos/","broadcast/config/").concat(e.id,".json");case g.a.DM:return"".concat("/1.1/videos/","dm/config/").concat(e.id,".json");default:throw new Error("".concat(y.a.UNSUPPORTED_TYPE,":").concat(e.type))}}},{key:"_shouldLoadStaticConfig",value:function(e){return e.type!==g.a.STATIC_BROADCAST}}]),e}(),j=r(643);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N="error",x="playback",M=function(){function e(t,r,n,i,o){f()(this,e),this.dispatch=t,this.httpClient=r,this.twitterAuthedHttpClient=n,this.playerId=i,this.showGeolocationPrompt=o}return v()(e,[{key:"load",value:function(e){if(!this.httpClient||!this.twitterAuthedHttpClient)return Promise.reject(y.a.MEDIA_TEARDOWN_ERROR);var t=e.tracks[0];return"live"!==t.contentType&&"broadcast"!==t.contentType?Promise.resolve(e):t.contentId?this.getUserPermission(t).then(this.getUserGeolocation.bind(this)).then(this.parseGeolocationData.bind(this)).then(this.acquireLiveStream.bind(this,e)).then(this.parseStreamAcquisitionResponse.bind(this)).then(this.setCookies.bind(this)).then(this.checkCookies.bind(this)).catch(this.handleRejectedPromises.bind(this)).then((function(r){var n=r.isLiveTimecode,i=r.playbackUrl,o=r.lifecycleToken,a=r.chatToken,s=r.broadcastShareUrl,c=r.restrictions;if(void 0!==c){if(void 0!==c.find((function(e){return"geoblocked"===e.restriction})))throw new Error(y.a.LIVE_VIDEO_GEOBLOCK_ERROR);var u=c.find((function(e){return"copyright-violation"===e.restriction}));if(void 0!==u){var l,d=u.copyright_violation_type;l=void 0!==d&&"TYPE_1"===d?y.a.EUROPEAN_COPYRIGHT_VIOLATION:y.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR;var p=new Error(l);throw p.copyrightHolder=u.copyright_violation_copyright_holder_name,p}}return U(U({},e),{},{tracks:[U(U({},t),{},{isLive:"live"===t.contentType||t.isLive,isLiveTimecode:n,variants:[{src:i,type:"application/x-mpegURL"}],lifecycleToken:o,chatToken:a,broadcastShareUrl:s})]})})):Promise.reject(Error(y.a.LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID))}},{key:"getUserPermission",value:function(e){return e.isEventGeoblocked?this.showGeolocationPrompt?Promise.resolve({shouldGetGeolocation:!0}):"permissions"in navigator?navigator.permissions.query({name:"geolocation"}).then((function(e){var t="granted"===e.state;return Promise.resolve({shouldGetGeolocation:t})})):Promise.resolve({shouldGetGeolocation:!1}):Promise.resolve({shouldGetGeolocation:!1})}},{key:"getUserGeolocation",value:function(e){return e.shouldGetGeolocation&&"geolocation"in navigator?(this.dispatch(Object(u.g)(this.playerId)),new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){return e(t)}),(function(){return e()}))}))):Promise.resolve()}},{key:"parseGeolocationData",value:function(e){return Promise.resolve({latitude:e&&e.coords.latitude,longitude:e&&e.coords.longitude})}},{key:"acquireLiveStream",value:function(e,t){var r=this,n=this.getLiveStreamAcquisitionDetails(e,t),i=n.params,o=n.path,a=n.isLiveTimecode;return this.twitterAuthedHttpClient.dispatch({host:"https://api.twitter.com",method:"GET",params:i,path:o}).then((function(e){return e.status<200||e.status>=400?Promise.reject({type:N,reason:y.a.LIVE_STREAM_ACQUISITION_NETWORK_ERROR}):(r.dispatch(Object(u.f)(r.playerId)),Promise.resolve({body:e.body,isLiveTimecode:a}))}),(function(){return Promise.reject({type:N,reason:y.a.LIVE_STREAM_ACQUISITION_NETWORK_ERROR})}))}},{key:"getLiveStreamAcquisitionDetails",value:function(e,t){var r=t.latitude,n=t.longitude,i=e.client,o=e.source,a=o&&o.trackId||0,s=e.tracks[a],c={client:i,use_syndication_guest_id:"tfw"===i,lat:r,lng:n,cookie_set_host:new j.a(window.location.href).getHostname()},u=e.features&&e.features.isLiveTimecodeEnabled&&(s.requestedTimecode>0||0===s.requestedTimecode);return u&&(c.latest_replay_playlist=!0),{params:c,isLiveTimecode:u,path:"".concat("/1.1/live_video_stream/status/").concat(s.contentId)}}},{key:"parseStreamAcquisitionResponse",value:function(e){var t=JSON.parse(e.body);return t&&t.source&&t.source.noRedirectPlaybackUrl?Promise.resolve({cookieSetUrl:t.source.cookieSetUrl,isLiveTimecode:e.isLiveTimecode,playbackUrl:t.source.noRedirectPlaybackUrl,lifecycleToken:t.lifecycleToken,chatToken:t.chatToken,broadcastShareUrl:t.shareUrl,restrictions:t.restrictions}):Promise.reject({type:N,reason:y.a.LIVE_PARSE_ERROR})}},{key:"setCookies",value:function(e){var t=e.cookieSetUrl,r=i()(e,["cookieSetUrl"]);return t?this.httpClient.dispatch({method:"GET",path:t,host:"",withCredentials:!0}).then((function(){return Promise.resolve(e)}),(function(){return Promise.reject({type:x,payload:r})})):Promise.reject({type:x,payload:r})}},{key:"checkCookies",value:function(e){var t=new j.a(e.cookieSetUrl);return window.location.host===t.getHostname()?Promise.resolve(e):this.httpClient.dispatch({method:"GET",path:"https://t.lv.twimg.com/live_video_stream/cookie_check",host:"",withCredentials:!0}).then((function(t){return 400!==t.status?Promise.resolve(e):Promise.reject({type:N,reason:y.a.LIVE_VIDEO_NO_COOKIES_ERROR})}),(function(){return Promise.reject({type:N,reason:y.a.LIVE_VIDEO_NO_COOKIES_ERROR})}))}},{key:"handleRejectedPromises",value:function(e){if(e.type===x)return Promise.resolve(e.payload);var t=e.reason?new Error(e.reason):e;return Promise.reject(t)}}]),e}();r(786),r(334);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(){function e(t){f()(this,e),this.httpClient=t}return v()(e,[{key:"load",value:function(e){var t=this;if(!this.httpClient)return Promise.reject(y.a.MEDIA_TEARDOWN_ERROR);var r=e.tracks[0];return"vmap"!==r.contentType?Promise.resolve(e):this.httpClient.dispatch({method:"GET",path:r.vmapUrl,host:"",withCredentials:!1}).then((function(n){if(n.status<200||n.status>=400)throw new Error(y.a.VMAP_NETWORK_ERROR);var i=t.parseVmap(n.body);return V(V({},e),{},{tracks:[V(V({},r),i)]})}),(function(){throw new Error(y.a.VMAP_NETWORK_ERROR)}))}},{key:"parseVmap",value:function(e){var t=(new window.DOMParser).parseFromString(e,"application/xml").getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","content")[0];if(void 0===t)throw new Error(y.a.VMAP_PARSE_ERROR);var r=t.getElementsByTagName("MediaFile")[0];if(void 0===r)throw new Error(y.a.VMAP_PARSE_ERROR);var n=r.textContent.trim().replace(/^http:\/\/amp\.twimg\.com\//,"https://amp.twimg.com/"),i=r.getAttribute("type")||function(e){var t=new j.a(e).getPath();return".m3u8"===t.slice(t.lastIndexOf("."))?"application/x-mpegURL":"video/mp4"}(n);return{publisherId:t.getAttribute("ownerId"),contentId:t.getAttribute("contentId"),variants:[{src:n,type:i}],cta:this.getCta(t)}}},{key:"getCta",value:function(e){var t=e.getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","cta_open_url")[0],r=e.getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","cta_watch_now")[0];return void 0!==t?{type:"url",url:t.getAttribute("url")}:void 0!==r?{type:"watch",url:r.getAttribute("url")}:void 0}}]),e}(),G=function(e,t,r,n,i,o,a){return[new D(r,a),new m(r),new d.b(r,o),new B(t),new M(e,t,r,n,i)]},H=function(e,t,r,n){var i=Promise.resolve({source:e,videoConfig:t});return r.reduce((function(e,t){return e.then((function(e){return t.load(e,n)}))}),i)},Q=r(612);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W="CONFIGURE_PLAYER",Y=function(e,t,r,n,i,o,a,s,c){return{type:W,source:t,session:r,analytics:n,playerId:e,adProvider:i,videoConfig:o,promotedContext:a,initiallyMutedCaptions:s,intentToPlayTime:c}},q="RELOADING_PLAYER",z=function(e,t,r){return{type:q,playerId:e,source:t,session:r}},X="BROADCAST_UPDATED",Z=function(e,t){return{type:X,updatedState:t,playerId:e}},$="CONFIGURATION_LOADED",ee=function(e,t){return{type:$,playerState:t,playerId:e}},te=function(e,t){return{type:"FEATURES_LOADED",features:t,playerId:e}},re=function(e,t,r,n,i,o,a,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},l=arguments.length>9?arguments[9]:void 0;return function(p){return p(Y(e,t,n,i,o,r,c.promotedContext,c.initiallyMutedCaptions,c.intentToPlayTime)),H(t,r,G(p,Object(Q.c)(e),Object(Q.e)(e),e,c.showGeolocationPrompt,c.includeBroadcastEventAssociation,l),c).then((function(t){if(p(ee(e,t)),a(),Object(d.c)(t)){var r=t.source.id,n=new d.a(p,Object(Q.e)(e),e,r,c.includeBroadcastEventAssociation);return n.queueUpdate(t.isLive).catch((function(t){p(Object(u.d)(e,t))})),n}})).catch((function(t){p(Object(u.d)(e,t)),s()}))}},ne=function(e,t,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0;return function(c){return c(z(e,t,n)),H(t,r,G(c,Object(Q.c)(e),Object(Q.e)(e),e,a.showGeolocationPrompt,a.includeBroadcastEventAssociation,s),a).then((function(t){c(ee(e,t)),i()})).catch((function(t){c(Object(u.d)(e,t)),o()}))}},ie=(t.h=function(e,t){switch(t.type){case W:case q:return J(J(J({},e),t.promotedContext),{},{source:t.source,session:t.session,playerId:t.playerId,configuration:{loading:!0}});case $:var r=e.currentTrackId?e.currentTrackId:t.playerState.currentTrackId,n=[].concat(a()(t.playerState.tracks||[]),a()(e.tracks||[]));return t.playerState.features.isDebuggingEnabled&&(l.a.debuggingEnabled=!0),J(J(J({},e),t.playerState),{},{currentTrackId:r,features:J(J({},e.features),t.playerState.features),tracks:n,configuration:{loading:!1}});case"FEATURES_LOADED":return J(J({},e),{},{features:J(J({},e.features),t.features)});case X:var o=t.updatedState,s=o.cta,c=o.isLive,u=o.viewerCount,d=o.viewCount,p=i()(o,["cta","isLive","viewerCount","viewCount"]),f=function(e){var t=e.tracks;return{sourceTrack:t.find((function(t){return t.id===e.source.trackId})),otherTracks:t.filter((function(t){return t.id!==e.source.trackId}))}}(e),h=f.sourceTrack,v=f.otherTracks;return h&&(0===h.requestedTimecode||h.requestedTimecode>0)&&delete p.posterImage,J(J(J({},e),p),{},{tracks:[].concat(a()(v),[J(J({},h),{},{cta:s,isLive:c,viewerCount:u,viewCount:d})])});default:return e}},{configuration:{loading:!1,error:void 0},tracks:[]})},590:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));r(67),r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(2),i=r.n(n),o=r(41),a=r.n(o),s=r(4),c=r.n(s),u=r(5),l=r.n(u),d=r(7),p=r.n(d),f=r(20),h=r.n(f),v=r(21),y=r.n(v),E=r(10),g=r.n(E),b=r(1),O=r.n(b),m=(r(36),r(0)),T=r(581),P=r(35),I=r.n(P),R=(r(85),r(444));function _(e){var t=S(e);return function(e){var r=S(e);return Object(R.a)(t,r)||(t=r),t}}function S(e){if(!e||"object"!==I()(e))return e;var t=JSON.parse(JSON.stringify(e));return delete t.dataUsageBytes,t.tracks=t.tracks.map((function(e){return"number"==typeof e.currentTimeMs&&delete e.currentTimeMs,e})),t}var w=r(824),C=r(69),k=r.n(C),A=r(3),D=r(725);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){O()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}function N(e){var t=e.periodic,r=e.children,n=t?x.PeriodicContext.Consumer:x.Context.Consumer;return m.createElement(n,null,(function(e){var t=e.aspectRatio,n=e.guestsState,i=e.playerApi,o=e.playerState,a=e.containerRef;return i&&a&&o?r({aspectRatio:t,guestsState:n,playerApi:i,playerState:o,containerRef:a}):null}))}var x=function(e){h()(r,e);var t=U(r);function r(){var e;c()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),O()(p()(e),"_cache",{stablePlayerState:_(null)}),O()(p()(e),"state",{hasError:null,guestsState:null,playerApi:null,playerState:null,stablePlayerState:null}),O()(p()(e),"_renderCustomOverlay",(function(){var t=e.props.children,r=e.state,n=r.guestsState,i=r.playerApi,o=r.stablePlayerState;return i&&t?"function"==typeof t?t({guestsState:n,playerApi:i,playerState:o,containerRef:e._containerRef}):t:null})),O()(p()(e),"_handleReload",(function(){return e.setState((function(){return{hasError:null}}))})),O()(p()(e),"_handlePlayerApi",(function(t){return function(r){var n=e.props.playerId;e.setState({playerApi:r}),e.props.onApiReady&&e.props.onApiReady(r),n&&t&&(e._unregister=t(n,r)),e._unsubscribe=r.subscribe((function(t,r){var n=e._cache.stablePlayerState(t);e.setState({stablePlayerState:n,playerState:t,guestsState:r}),e.props.onStateUpdate&&e.props.onStateUpdate(t,r)}))}})),e}return l()(r,[{key:"componentWillUnmount",value:function(){this._unregister&&this._unregister(),this._unsubscribe&&this._unsubscribe()}},{key:"componentDidUpdate",value:function(){if(!this._containerRef){var e=k.a.findDOMNode(this);e&&e instanceof HTMLElement&&(this._containerRef=e)}}},{key:"componentDidCatch",value:function(e,t){var r={error:e,info:t};console.error(r),this.setState((function(){return{hasError:r}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.guestsState,o=t.playerApi,s=t.playerState,c=t.stablePlayerState,u=this.props,l=u.aspectRatio,d=(u.children,u.objectFitVideo),p=(u.onApiReady,u.onStateUpdate,u.playerId,u.basePlayerClass),f=u.size,h=a()(u,["aspectRatio","children","objectFitVideo","onApiReady","onStateUpdate","playerId","basePlayerClass","size"]),v={aspectRatio:this.props.aspectRatio,guestsState:n,playerApi:o,playerState:s,containerRef:this._containerRef},y=L(L({},v),{},{playerState:c});return m.createElement(T.a,{ratio:l,style:[M.root,M[f]]},this.state.hasError?m.createElement(w.a,{onReloadPress:this._handleReload}):m.createElement(r.Context.Provider,{value:y},m.createElement(r.PeriodicContext.Provider,{value:v},m.createElement(D.a.RegistrationContext.Consumer,null,(function(t){var r=t.registerPlayer;return m.createElement(p,i()({},h,{customOverlay:e._renderCustomOverlay(),displayOptions:{objectFitVideo:d},setPlayerApi:e._handlePlayerApi(r)}))})))))}}]),r}(m.Component);O()(x,"Consumer",N),O()(x,"defaultProps",{aspectRatio:A.a.theme.aspectRatios.landscape,size:"fill"}),O()(x,"Context",m.createContext({aspectRatio:A.a.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null})),O()(x,"PeriodicContext",m.createContext({aspectRatio:A.a.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null}));var M=A.a.create({root:{position:"relative"},fill:{width:"100%",height:"100%"},small:{width:480,height:270},medium:{width:640,height:360},large:{width:800,height:450}});t.b=x},591:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return a}));var n={EVENT:"event",VISIT:"url",WATCH:"watch",IMAGE:"image",WATCH_NOW:"watch_now",SHOP:"shop"},i=3,o=["cover","contain"],a={Default:9,Safari:12,Firefox:13}},609:function(e,t,r){"use strict";r.d(t,"e",(function(){return h})),r.d(t,"r",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"s",(function(){return E})),r.d(t,"c",(function(){return g})),r.d(t,"o",(function(){return b})),r.d(t,"d",(function(){return O})),r.d(t,"p",(function(){return m})),r.d(t,"q",(function(){return T})),r.d(t,"b",(function(){return P})),r.d(t,"l",(function(){return I})),r.d(t,"m",(function(){return S})),r.d(t,"n",(function(){return w})),r.d(t,"j",(function(){return C})),r.d(t,"i",(function(){return k})),r.d(t,"h",(function(){return A})),r.d(t,"g",(function(){return D})),r.d(t,"a",(function(){return x}));r(23),r(45),r(40),r(17),r(18),r(46);var n=r(65),i=r.n(n),o=r(796),a=r.n(o),s=r(1),c=r.n(s),u=(r(326),r(30),r(160),r(103),r(36),r(610)),l=r(675),d=r(587);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h="TICK",v=function(e,t,r,n,i,o){return{type:h,currentTimeMs:t,absoluteTimeMs:r,durationMs:n,playerId:e,hasCaptions:i,currentVariantIndex:o}},y="TRACK_FINISHED",E=function(e){return{type:y,playerId:e}},g="NEXT_TRACK",b=function(e){return{type:g,playerId:e}},O="PLAYER_READY",m=function(e){return{type:O,playerId:e}},T=function(e,t){return{type:"ROTATION_UPDATED",playerId:e,rotation:t}},P="HLSJS_READY",I=function(e){return{type:P,playerId:e}},R=new Date("Jan 01 1900 GMT").getTime(),_=new Date("Jan 01 1970 GMT").getTime()-R,S=function(e,t){return{type:"ID3_METADATA",playerId:e,metadata:t}},w=function(e,t){return{type:"ID3_TAG_DATA",playerId:e,id3Json:t,currentNtpTime:(Date.now()+_)/1e3}},C=function(e){return{type:"BUFFER_START",playerId:e}},k=function(e){return{type:"BUFFER_END",playerId:e}},A=function(e,t){return{type:"BITRATE_SWITCHED",playerId:e,bitrate:t}},D=function(e,t){return{type:"ACTIVE_TEXT_CUES_UPDATE",playerId:e,cues:t}},j=function(e){var t=e.tracks;return{currentTrack:t.find((function(t){return t.id===e.currentTrackId})),otherTracks:t.filter((function(t){return t.id!==e.currentTrackId}))}},L=function(e,t){var r=j(e),n=r.currentTrack,i=r.otherTracks;return i.splice(e.currentTrackId,0,t(n)),f(f({},e),{},{tracks:i})},U=function(e,t){return L(e,(function(e){return f(f({},e),t)}))};t.k=function(e,t){switch(t.type){case h:return U(e,{durationMs:t.durationMs,currentTimeMs:t.currentTimeMs,absoluteTimeMs:t.absoluteTimeMs,hasCaptions:t.hasCaptions,currentVariantIndex:t.currentVariantIndex});case d.E:return f(f({},L(e,(function(e){return f(f({},e),{},{playbackCompleted:!1})}))),{},{tracksFinished:!1});case O:var r,n=(null==e||null===(r=e.features)||void 0===r?void 0:r[l.e])&&Object(u.e)(e);return U(e,{playerReady:!0,playbackRateSupported:n});case"ROTATION_UPDATED":return U(e,{rotation:t.rotation});case"ID3_METADATA":var i=t.metadata,o=e;return i&&(o=U(o,{metadata:i})),o;case"ID3_TAG_DATA":var a=t.id3Json,s=t.currentNtpTime,c=a.ntp,p=e;if(c)p=U(p,{liveLatencyMs:1e3*(s-c),id3NtpTime:c});return p;case"BITRATE_SWITCHED":return U(e,{currentBitrate:t.bitrate});case"BUFFER_START":return U(e,{isBuffering:!0});case"BUFFER_END":return U(e,{isBuffering:!1});case g:return N(e,!0);case y:var v=L(e,(function(e){return f(f({},e),{},{playbackCompleted:!0})}));return N(v);case"ACTIVE_TEXT_CUES_UPDATE":return U(e,{textCues:t.cues});default:return e}};var N=function(e,t){var r,n=j(e).currentTrack,o=!1!==n.shouldAutoAdvance||t,s="ad"===n.displayType&&(null===(r=e.errorInfo)||void 0===r?void 0:r.adFailed);if(e.nextTrackIds.length>0&&o){var c=a()(e.nextTrackIds),u=c[0],l=c.slice(1),p=e.tracks,h=p.find((function(e){return e.id===u})),v=p.filter((function(e){return e.id!==u}));return f(f({},e),{},{currentTrackId:u,nextTrackIds:l,error:s?void 0:e.error,controls:f(f({},e.controls),{},{playState:s&&!e.isPlaying?void 0:d.n.PLAY_REQUESTED,captionsState:e.areCaptionsShown?d.f.CAPTIONS_ON_REQUESTED:d.f.CAPTIONS_OFF_REQUESTED}),intentToPlayTime:void 0,tracks:[].concat(i()(v),[f(f({},h),{},{playerReady:!1})])})}return f(f({},e),{},{intentToPlayTime:void 0,isPlaying:!!n.shouldLoop,tracksFinished:!n.shouldLoop&&0===e.nextTrackIds.length})},x={nextTrackIds:[]}},610:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"e",(function(){return d})),r.d(t,"a",(function(){return f}));var n=r(1),i=r.n(n),o=(r(326),r(30),r(96),r(19),r(64),r(85),r(60),r(23),r(45),r(40),r(17),r(18),r(46),r(643));function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e,t){if(e.tracks)return e.tracks.find((function(e){return e.id===t}))},u=function(e){return c(e,e.currentTrackId)},l=function(e){return e.tracks?e.tracks.filter((function(t){return t.id!==e.currentTrackId})):[]},d=function(e){var t=u(e);return"content"===t.displayType&&"gif"!==t.contentType&&!t.isLive&&!e.impressionId},p=new RegExp(/^https:\/\/[\w-]+.twimg.com\/.+\.m3u8/),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(h)},h=function(e){var t=e.src;if(p.test(t)){var r=new o.a(t);r.addSearchParam("descending",!0),t=r.toString()}return s(s({},e),{},{src:t})}},611:function(e,t,r){"use strict";r.d(t,"c",(function(){return v})),r.d(t,"h",(function(){return y})),r.d(t,"i",(function(){return E})),r.d(t,"a",(function(){return g})),r.d(t,"d",(function(){return b})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return m})),r.d(t,"b",(function(){return R}));r(23),r(30),r(40),r(17),r(18),r(46);var n=r(35),i=r.n(n),o=r(1),a=r.n(o),s=r(41),c=r.n(s),u=(r(85),r(327),r(449),r(450),r(45),r(203),r(60),r(205),r(677)),l=r(582),d=r(589);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e){var t=function(e,t){if("object"!==i()(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i()(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i()(t)?t:String(t)}var v="PLAYBACK_ERROR",y=function(e,t){return{type:v,playerId:e,thrownError:t,isFatal:!0}},E=function(e){return{type:"PLAYBACK_RATE_ERROR",playerId:e}},g="CONFIGURATION_LOAD_ERROR",b=function(e,t){return{type:g,playerId:e,thrownError:t,isFatal:!0}},O=function(e){return{type:"ERROR_RESOLVED",playerId:e}},m=function(e){return{type:"GEOLOCATION_PROMPT",playerId:e}},T=function(e){switch(e.message){case l.a.BROADCAST_ENDED_NO_REPLAY:case l.a.BROADCAST_NOT_FOUND:case l.a.DMCA_TAKEDOWN_ERROR:case l.a.EUROPEAN_COPYRIGHT_VIOLATION:case l.a.ORIGINAL_CONTEXT_DELETED:case l.a.LIVE_VIDEO_GEOBLOCK_ERROR:case l.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:case l.a.LIVE_VIDEO_GEOLOCATION_PROMPT:case l.a.MEDIA_GEOBLOCK_ERROR:case l.a.MEDIA_NOT_SUPPORTED:return!1;default:return!0}},P=function(e){if(!T(e))return!1;switch(e.message){case l.a.LIVE_VIDEO_NO_COOKIES_ERROR:return!1;default:return!0}},I=function(e,t){var r,n=t.currentTrackId,i=t.errorInfo,o=t.tracks,a=i.count+1,s=T(e),c=P(e)&&a<=i.retryMax,u="ad"===(null==o||null===(r=o[n])||void 0===r?void 0:r.displayType)?!c||!s:t.errorInfo.adFailed;return{backoffMs:c?1e3*t.errorInfo.count:R.backoffMs,count:a,canRetry:s,autoRetry:c,adFailed:u}};t.e=function(e,t){var r;switch(t.type){case d.b:var n=parseInt(e.features.fatalErrorRetryMax,10),i=isNaN(n)?R.errorInfo.retryMax:n;return f(f({},e),{},{errorInfo:f(f({},e.errorInfo),{},{retryMax:i})});case d.e:return f(f({},e),{},{error:void 0,errorInfo:f(f({},e.errorInfo),{},{autoRetry:!1,canRetry:!1})});case g:var o,a=t.thrownError,s=I(a,e);return a.message!==l.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR&&a.message!==l.a.EUROPEAN_COPYRIGHT_VIOLATION||(o={copyrightHolder:a.copyrightHolder}),f(f({},e),{},{error:a.message,errorData:o,errorInfo:f(f({},e.errorInfo),s)});case v:var p=t.thrownError,y=Object(u.a)(e.mediaAvailability),E=y?new Error(y):p,b=I(E,e);return f(f({},e),{},{error:E.message,errorInfo:f(f({},e.errorInfo),b)});case"PLAYBACK_RATE_ERROR":return r=function(e,t){e[t];return c()(e,[t].map(h))}(e.controls,"playbackRate"),f(f({},e),{},{controls:r});case"ERROR_RESOLVED":return f(f({},e),{},{error:void 0,errorInfo:f(f({},e.errorInfo),{},{autoRetry:!1,canRetry:!1})});case"GEOLOCATION_PROMPT":var O=new Error(l.a.LIVE_VIDEO_GEOLOCATION_PROMPT);return f(f({},e),{},{error:O.message,errorInfo:f(f({},e.errorInfo),{},{autoRetry:P(O),canRetry:T(O)})});default:return e}};var R={error:void 0,errorInfo:{adFailed:!1,autoRetry:!1,backoffMs:void 0,canRetry:!1,count:0,retryMax:0},errorData:void 0}},612:function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"h",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return p}));r(326),r(103),r(30);var n={},i=function(e,t,r,i,o,a){n[e]={httpClient:t,twitterAuthedHttpClient:r,errorLogger:i,hlsJsDataUsageTracker:o,featureProvider:a}},o=function(e){delete n[e]},a=function(e){return n[e]&&n[e].httpClient},s=function(e){return n[e]&&n[e].twitterAuthedHttpClient},c=function(e,t){n[e]&&t(n[e].errorLogger)},u=function(e){return function(e){return n[e]||{}}(e).featureProvider},l=function(e,t){n[e]&&t(n[e].hlsJsDataUsageTracker)},d=[],p=function(e){if(!e)throw new SyntaxError("Missing parameter: playbackSessionId");var t=d.find((function(t){return t.playbackSessionId===e}));return d=d.filter((function(t){return t.playbackSessionId!==e})),t}},613:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"a",(function(){return h}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n),o=(r(326),r(589)),a=r(623),s=r(587);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l="PLAY_PREVIEW",d=function(e){return{type:l,playerId:e}},p="PAUSE_PREVIEW",f=function(e){return{type:p,playerId:e}};t.d=function(e,t){switch(t.type){case o.c:return u(u({},e),{},{initiallyMutedCaptions:t.initiallyMutedCaptions});case l:return e.isPlaying?e:u(u({},e),{},{isPreview:!0,controls:u(u({},e.controls),{},{muteState:s.j.MUTE_REQUESTED})});case p:return u(u({},e),{},{isPreview:!0,controls:u(u({},e.controls),{},{muteState:s.j.MUTE_REQUESTED})});case s.u:case s.x:case s.z:case s.A:case s.y:case a.b:if(!e.isPreview)return e;var r=e.tracks.find((function(t){return t.id===e.currentTrackId}));if(!r)return e;var n="gif"===r.contentType?void 0:s.j.UNMUTE_REQUESTED;return u(u({},e),{},{isPreview:!1,controls:u(u({},e.controls),{},{muteState:n})});default:return e}};var h={isPreview:!1}},622:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(61);var n=Object.freeze({BROADCAST:"broadcast",DM:"dm",TWEET:"tweet",FLEET:"fleet",STATIC_BROADCAST:"static_broadcast",AUDIO_SPACE:"audio_space"});t.b={forAudioSpace:function(e,t){return{type:n.AUDIO_SPACE,id:e,mediaKey:t}},forBroadcast:function(e,t,r){return{type:n.BROADCAST,id:e,tweetId:t,impressionId:r}},forDm:function(e){return{type:n.DM,id:e}},forTweet:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:n.TWEET,id:e,impressionId:t,index:r}},forFleet:function(e){return{type:n.FLEET,id:e}}}},623:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"g",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"h",(function(){return p})),r.d(t,"a",(function(){return f}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s="REQUEST_FULLSCREEN",c=function(e,t,r){return{type:s,playerId:e,containerEl:t,videoEl:r}},u="REQUEST_SHRINK",l=function(e,t){return{playerId:e,type:u,element:t}},d="SET_FULLSCREEN_STATE",p=function(e,t){return{type:d,playerId:e,isFullscreen:t}};t.e=function(e,t){switch(t.type){case d:return a(a({},e),{},{fullscreen:a(a({},e.fullscreen),{},{isFullscreen:t.isFullscreen})});default:return e}};var f={fullscreen:{isFullscreen:!1}}},643:function(e,t,r){"use strict";r.d(t,"b",(function(){return s}));var n=r(4),i=r.n(n),o=r(5),a=r.n(o);r(106),r(85),r(23),r(36),r(336),r(60),r(86),r(88),r(107),r(82),r(19),r(206);function s(e){return Object.keys(e).map((function(t){var r=void 0===e[t]?"":encodeURIComponent(e[t]);return"".concat(encodeURIComponent(t),"=").concat(r)})).join("&")}var c=function(){function e(t){i()(this,e);try{this.parser=new URL(t)}catch(e){this.parser=document.createElement("a"),this.parser.href=t}}return a()(e,[{key:"getHostname",value:function(){return this.parser.hostname}},{key:"getPath",value:function(){return this.parser.pathname}},{key:"isSafe",value:function(){return!!this.parser.protocol.match(/^https?:$/)}},{key:"addSearchParam",value:function(e,t){this.parser.search?this.parser.search="".concat(this.parser.search,"&").concat(e,"=").concat(t):this.parser.search="?".concat(e,"=").concat(t)}},{key:"toString",value:function(){return this.parser.href}}]),e}();t.a=c},644:function(e,t,r){"use strict";r.d(t,"c",(function(){return m})),r.d(t,"a",(function(){return T})),r.d(t,"b",(function(){return P}));var n=r(4),i=r.n(n),o=r(5),a=r.n(o),s=r(1),c=r.n(s),u=r(41),l=r.n(u),d=(r(106),r(325),r(60),r(36),r(45),r(203),r(327),r(23),r(30),r(40),r(17),r(18),r(46),r(589)),p=r(591),f=r(582),h=r(610),v=r(622);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{ids:e.join(","),include_events:t}},b=function(e,t,r){try{return e.dispatch({method:"GET",host:"https://api.twitter.com",path:"/1.1/broadcasts/show.json",params:g([t],r),withCredentials:!0}).then((function(e){if(200!==e.status)return Promise.reject("".concat(f.a.BROADCAST_REQUEST_ERROR,":").concat(e.status));var r=JSON.parse(e.body),n=r.broadcasts,i=r.events;if(!n||!n[t]||!n[t].broadcast_id)return Promise.reject(f.a.BROADCAST_NOT_FOUND);if("RUNNING"!==n[t].state&&!n[t].available_for_replay)return Promise.reject(f.a.BROADCAST_ENDED_NO_REPLAY);var o={broadcast:n[t]};return i&&i[t]&&i[t].length&&(o.associatedEvent=i[t][0]),o}),(function(e){return console.log(e),Promise.reject(f.a.BROADCAST_REQUEST_ERROR)}))}catch(e){return Promise.reject(e)}},O=function(e){var t=e.broadcast,r=e.associatedEvent,n=void 0===r?{}:r,i=t.state,o=t.total_watched,a=t.total_watching,s=t.image_url,c=t.start_ms,u=t.ping_ms,l=t.timedout_ms,d=t.end_ms,f=n.description,h=n.title,v=n.url,y=n.id,E="RUNNING"===i,g=s,b=parseInt(a,10)||0,O=parseInt(o,10)||0,m={isLive:E,viewerCount:E?b:O,posterImage:g,eventDescription:f,eventTitle:h,eventUrl:v,eventId:y};if(h&&v&&(m.cta={label:h,type:p.b.EVENT,url:v}),!E){var T=(d||l||u||c)-c;m.durationMs=T}return m},m=function(e){return e.source&&e.source.type===v.a.BROADCAST},T=function(){function e(t,r,n,o,a){i()(this,e),this.dispatch=t,this.httpClient=r,this.playerId=n,this.broadcastId=o,this.includeBroadcastEventAssociation=a,this.updaterTimeout=null}return a()(e,[{key:"queueUpdate",value:function(e){var t,r,n=this,i=e?15:30,o=new Promise((function(e,n){t=e,r=n}));return this.updaterTimeout=setTimeout((function(){var e,i,o;(e=n.httpClient,i=n.broadcastId,o=n.includeBroadcastEventAssociation,b(e,i,o).then((function(e){return O(e)}),(function(e){throw new Error(e)}))).then((function(e){null!=n.updaterTimeout&&(n.queueUpdate(e.isLive),n.dispatch(Object(d.f)(n.playerId,e))),t()}),(function(e){console.log(e),r(e)}))}),1e3*i),o}},{key:"cancelUpdate",value:function(){clearTimeout(this.updaterTimeout),this.updaterTimeout=null}}]),e}(),P=function(){function e(t,r){i()(this,e),this.httpClient=t,this.includeBroadcastEventAssociation=r}return a()(e,[{key:"load",value:function(e){return this.httpClient?function(e,t,r){if(!m(t))return Promise.resolve(t);var n=t.source.id;return b(e,n,r).then((function(e){var r,n,i,o,a,s,c,u,d,p,f=Object(h.d)(t,0),v=(r=e.broadcast,n=r.broadcast_id,i=r.media_key,o=r.profile_image_url,a=r.replay_edited_start_time,s=r.requires_fine_grain_geoblocking,c=r.twitter_user_id,u=r.user_id,d=r.unavailable_in_periscope,p=r.user_display_name,{broadcastId:n,contentId:i,contentType:"broadcast",displayType:"content",expandedUrl:"https://www.pscp.tv/w/".concat(n),isEventGeoblocked:s,playbackType:"application/x-mpegURL",publisherDisplayName:p,publisherId:c,periscopePublisherId:u,publisherProfileImageUrl:o,replayEditedStartTime:a,shouldLoop:!1,unavailableInPeriscope:d}),y=O(e),g=y.cta,b=y.durationMs,m=y.isLive,T=y.viewerCount,P=y.viewCount,I=l()(y,["cta","durationMs","isLive","viewerCount","viewCount"]);return t.posterImage&&delete I.posterImage,E(E(E({},t),I),{},{client:"web",tracks:[E(E(E({},f),v),{},{cta:g,durationMs:b,id:0,isLive:m,viewerCount:T,viewCount:P})],currentTrackId:0,source:E(E({},t.source),{},{trackId:0})})}),(function(e){throw new Error(e)}))}(this.httpClient,e,this.includeBroadcastEventAssociation):Promise.reject(f.a.MEDIA_TEARDOWN_ERROR)}}]),e}()},674:function(e,t,r){"use strict";r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n),o=r(968);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={showControls:!0,promotedContext:{}};t.a={createPlayer:function(e){var t=e.domElement,r=e.source,n=e.videoConfig,i=e.httpClient,a=e.twitterAuthedHttpClient,u=e.options,l=void 0===u?{}:u;return new o.a({videoConfig:n,source:r,domElement:t,httpClient:i,twitterAuthedHttpClient:a,options:s(s({},c),l)})}}},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return u}));var n="web_video_bitrate_persistence_enabled",i="web_video_caption_repositioning_enabled",o="web_video_hlsjs_version",a="web_video_hlsjs_worker_enabled",s="web_video_playback_rate_enabled",c="web_video_player_size_cap_disabled",u="web_video_smart_buffering_enabled"},676:function(e,t,r){"use strict";t.a={BROADCAST_EVENT_ASSOCIATION_UPDATED:"broadcastEventAssociationUpdated",FULLSCREEN_ENTERED:"fullscreenEntered",FULLSCREEN_EXITED:"fullscreenExited",HLSJS_INSTANTIATED:"hlsJsInstantiated",GEOBLOCK_ERROR:"geoblockError",LIVE_ENDED:"liveEnded",LIVE_STARTED:"liveStarted",LIVE_CLICKTHROUGH:"liveClickthrough",MUTE:"mute",NO_COOKIES_ERROR:"noCookiesError",PAUSE:"pause",PLAY:"play",PLAYBACK_COMPLETE:"playbackComplete",READY:"ready",UNMUTE:"unmute"}},677:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));r(326),r(23);var n=r(582);function i(e,t){var r=e.getState();if(r&&r.players&&r.players[t])return r.players[t]}var o=function(e){if(e&&"unavailable"===e.status)switch(e.reason){case"geoblocked":return n.a.MEDIA_GEOBLOCK_ERROR;case"deleted":return n.a.ORIGINAL_CONTEXT_DELETED;case"dmcaed":return n.a.DMCA_TAKEDOWN_ERROR;case"copyright_violation":return n.a.EUROPEAN_COPYRIGHT_VIOLATION}return null},a=function(e,t){var r=Object.keys(e).find((function(r){return t(e[r])}));return void 0!==r?e[r]:void 0}},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"c",(function(){return A}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n),o=(r(80),r(809)),a=r(613),s=r(35),c=r.n(s),u=r(65),l=r.n(u),d=r(41),p=r.n(d),f=(r(85),r(36),r(449),r(450),r(203),r(60),r(205),r(589)),h=r(609),v=r(587),y=r(610);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(e,t){if("object"!==c()(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c()(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c()(t)?t:String(t)}var O=function(e,t){e[t];return p()(e,[t].map(b))},m=function(e){var t=e.intentToPlayTime;return void 0===t?new Date:t},T={playbackRate:1,volume:1,areCaptionsShown:!1,hasCaptions:!1,hasPlaybackStarted:!1,intentToPlayTime:void 0,inPiPMode:!1,isMuted:!1,isPlaying:!1,isScrubbing:!1,controls:{isHidden:!0,isPosterShown:!0}},P=r(611),I=r(623),R=r(730);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=S(S(S(S(S(S(S(S(S({},o.a),a.a),T),f.d),P.b),I.a),R.b),h.a),{},{percentVisible:1,percentOfViewportOccupied:1,sizesInfo:{}}),C=[o.c,f.h,function(e,t){var r;switch(t.type){case f.c:return g(g({},e),{},{intentToPlayTime:t.intentToPlayTime});case v.u:case a.c:return e.isPlaying&&e.controls.playState!==v.n.PAUSE_REQUESTED?e:g(g({},e),{},{intentToPlayTime:m(e),controls:g(g({},e.controls),{},{playState:v.n.PLAY_REQUESTED})});case a.b:case v.r:case v.b:return e.isPlaying||e.controls.playState===v.n.PLAY_REQUESTED?g(g({},e),{},{controls:g(g({},e.controls),{},{playState:v.n.PAUSE_REQUESTED})}):e;case v.x:var n=Object(y.b)(e),i=Object(y.c)(e);return n&&"maxLoopCount"in n&&(n.loopCounter=0,n.shouldLoop=!0),g(g({},e),{},{intentToPlayTime:m(e),tracks:n?[].concat(l()(i),[g({},n)]):e.tracks,controls:g(g({},e.controls),{},{isReplayButtonShown:!1,playState:v.n.PLAY_REQUESTED})});case v.E:return r=O(e.controls,"playState"),e.controls.playState!==v.n.PLAY_REQUESTED&&(r.playState=e.controls.playState),r.isPosterShown=!1,g(g({},e),{},{controls:r,hasPlaybackStarted:!0,isPlaying:!0});case v.D:return r=O(e.controls,"playState"),e.controls.playState!==v.n.PAUSE_REQUESTED&&(r.playState=e.controls.playState),g(g({},e),{},{controls:r,isPlaying:!1});case v.q:return g(g({},e),{},{controls:g(g({},e.controls),{},{muteState:v.j.MUTE_REQUESTED})});case v.z:return r=g(g({},e.controls),{},{muteState:v.j.UNMUTE_REQUESTED}),0!==e.volume||e.controls.volume>0||(r.volume=1),g(g({},e),{},{controls:r});case v.A:return r=g(g({},e.controls),{},{volume:t.volume}),0!==t.volume||e.isMuted?t.volume>0&&e.isMuted&&(r.muteState=v.j.UNMUTE_REQUESTED):r.muteState=v.j.MUTE_REQUESTED,g(g({},e),{},{controls:r});case v.H:return r=O(O(e.controls,"muteState"),"volume"),e.controls.muteState!==v.j.MUTE_REQUESTED||t.isMuted?e.controls.muteState===v.j.UNMUTE_REQUESTED&&t.isMuted&&(r.muteState=v.j.UNMUTE_REQUESTED):r.muteState=v.j.MUTE_REQUESTED,t.volume!==e.controls.volume&&(r.volume=e.controls.volume),g(g({},e),{},{controls:r,volume:t.volume,isMuted:t.isMuted});case v.y:return g(g({},e),{},{isScrubbing:!0,controls:g(g({},e.controls),{},{scrubToFraction:t.fraction})});case v.w:var o=t.startTimeS,s=t.endTimeS;return g(g({},e),{},{controls:g(g({},e.controls),{},{playbackTimeRange:{startTimeS:o,endTimeS:s}})});case v.F:return r=O(e.controls,"scrubToFraction"),g(g({},e),{},{isScrubbing:!1,controls:r});case v.d:return r=O(e.controls,"playbackTimeRange"),g(g({},e),{},{controls:r});case v.G:return g(g({},e),{},{isScrubbing:!0});case v.h:return g(g({},e),{},{controls:g(g({},e.controls),{},{isHidden:!0})});case v.B:return g(g({},e),{},{controls:g(g({},e.controls),{},{isHidden:!1})});case v.p:return g(g({},e),{},{userSpecifiedCaptions:t.isUserSet,controls:g(g({},e.controls),{},{captionsState:v.f.CAPTIONS_ON_REQUESTED})});case v.o:return g(g({},e),{},{userSpecifiedCaptions:t.isUserSet,controls:g(g({},e.controls),{},{captionsState:v.f.CAPTIONS_OFF_REQUESTED})});case v.e:return r=O(e.controls,"captionsState"),g(g({},e),{},{areCaptionsShown:t.areCaptionsShown,controls:r});case h.f:var c=g({},e),u=Object(y.b)(e),d=Object(y.c)(e);u&&"maxLoopCount"in u&&(u.loopCounter>=u.maxLoopCount-1?u.shouldLoop=!1:u.loopCounter+=1,c.tracks=[].concat(l()(d),[g({},u)]));var p=(u||{}).shouldLoop;return 0===e.nextTrackIds.length&&(e.isPreview?c.controls=g(g({},e.controls),{},{isPosterShown:!p}):c.controls=g(g({},e.controls),{},{isHidden:p,isReplayButtonShown:!p,playState:p?void 0:v.n.PAUSE_REQUESTED})),c;case v.C:return g(g({},e),{},{percentVisible:t.percentVisible,percentOfViewportOccupied:t.percentOfViewportOccupied,sizesInfo:t.sizesInfo||{}});case v.a:r=O(e.controls,"playState"),e.controls.playState!==v.n.PLAY_REQUESTED&&(r.playState=e.controls.playState);var E=Object(y.b)(e),b=Object(y.c)(e);return g(g({},e),{},{controls:g(g({},r),{},{isPosterShown:!0}),tracks:[].concat(l()(b),[g(g({},E),{},{isBuffering:!1})])});case v.g:var T=void 0===e.dataUsageBytes?t.bytes:e.dataUsageBytes+t.bytes;return g(g({},e),{},{dataUsageBytes:T});case v.i:var P=e.liveClickthroughClicked||0;return g(g({},e),{},{liveClickthroughClicked:1+P});case v.t:return g(g({},e),{},{controls:g(g({},e.controls),{},{pipState:v.m.PICTURE_IN_PICTURE_ON_REQUESTED})});case v.s:return g(g({},e),{},{controls:g(g({},e.controls),{},{pipState:v.m.PICTURE_IN_PICTURE_OFF_REQUESTED})});case v.k:return r=O(e.controls,"pipState"),g(g({},e),{},{inPiPMode:t.inPiPMode,controls:r});case v.v:return t.playbackRate<=0||t.playbackRate===e.playbackRate?e:(r=g(g({},e.controls),{},{playbackRate:t.playbackRate}),g(g({},e),{},{controls:r}));case v.l:return r=O(e.controls,"playbackRate"),g(g({},e),{},{playbackRate:t.playbackRate,controls:r});default:return e}},h.k,a.d,P.e,I.e,R.e],k="TEARDOWN_PLAYER",A=function(e){return{type:k,playerId:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return r.reduce((function(e,r){return r(e,t)}),e)};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;if(void 0!==t.playerId){if(t.type===k){var n=S({},e);return delete n[t.playerId],n}var o=e[t.playerId];if(t.type===f.e){if(!o)return e;o=S(S({},w),{},{errorInfo:o.errorInfo,features:o.features})}var a=D(o,t,r);if(void 0!==a)return S(S({},e),{},i()({},t.playerId,a))}return e}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));r(67),r(23),r(45),r(30),r(40),r(17),r(18),r(46),r(449),r(450),r(203),r(205);var n=r(35),i=r.n(n),o=r(41),a=r.n(o),s=r(4),c=r.n(s),u=r(5),l=r.n(u),d=r(7),p=r.n(d),f=r(20),h=r.n(f),v=r(21),y=r.n(v),E=r(10),g=r.n(E),b=r(1),O=r.n(b),m=(r(36),r(325),r(60),r(85),r(0));function T(e){var t=function(e,t){if("object"!==i()(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i()(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i()(t)?t:String(t)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){O()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var _=function(e){h()(r,e);var t=R(r);function r(){var e;c()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),O()(p()(e),"state",{playerApi:void 0,playerState:void 0,guestsState:void 0}),O()(p()(e),"_initializeState",(function(t){t&&(e._unsubscribe&&e._unsubscribe(),e.setState({playerApi:t}),e._unsubscribe=t.subscribe((function(t,r){return e.setState({playerState:t,guestsState:r})})))})),e}return l()(r,[{key:"componentDidMount",value:function(){this._initializeState(this.props.playerApi)}},{key:"componentDidUpdate",value:function(e){var t=this.props.playerApi;t!==e.playerApi&&this._initializeState(t)}},{key:"render",value:function(){return this.props.children(this.state)}}]),r}(m.Component),S=function(e){h()(r,e);var t=R(r);function r(){var e;c()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),O()(p()(e),"state",{players:{}}),O()(p()(e),"_mounted",!1),O()(p()(e),"_registerPlayer",(function(t,r){var n=new Promise((function(n){setTimeout((function(){e._mounted?e.setState((function(e){return{players:I(I({},e.players),{},O()({},t,r))}}),n):n()}))}));return function(){n.then((function(){return e._unregisterPlayer(t)}))}})),O()(p()(e),"_unregisterPlayer",(function(t){e._mounted&&e.setState((function(r){var n=e.state.players;n[t];return{players:a()(n,[t].map(T))}}))})),O()(p()(e),"_registrationContext",{registerPlayer:e._registerPlayer}),e}return l()(r,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){return m.createElement(r.RegistrationContext.Provider,{value:this._registrationContext},m.createElement(r.ProviderContext.Provider,{value:this.state},this.props.children))}}]),r}(m.Component);O()(S,"MetadataSubscriber",(function(e){var t=e.playerId,r=e.children;return m.createElement(S.ProviderContext.Consumer,null,(function(e){var n=e.players;return m.createElement(_,{playerApi:n&&n[t]},r)}))})),O()(S,"RegistrationContext",m.createContext({registerPlayer:void 0})),O()(S,"ProviderContext",m.createContext({players:{}}))},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=r(1e3).a},727:function(e,t,r){"use strict";var n=r(803);t.__esModule=!0,t.default=void 0;var i=r(804);t.updateAudioLevels=i.updateAudioLevels;var o=r(805);t.updateGuestInfo=o.updateGuestInfo;var a=n(r(972));t.hydraMiddleware=a.default,t.registerExperience=a.registerExperience;var s=n(r(806));t.resetGuestState=s.resetGuestState,t.teardownExperience=s.teardownExperience;var c=s.default;t.default=c},728:function(e,t,r){var n=r(8),i=r(464);n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},729:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a}));r(62);var n=function(){var e=window.navigator;return 0===e.vendor.indexOf("Apple")&&/\sSafari\//.test(e.userAgent)},i=function(){var e=window.navigator;return/Firefox\/[.0-9]*/.test(e.userAgent)},o=function(){var e=window.navigator;return n()&&/iPad|iPhone/.test(e.userAgent)},a=function(){return n()&&!o()}},730:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return h})),r.d(t,"b",(function(){return v}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n),o=r(609),a=r(675);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={IDLE:"IDLE",BUFFERING_REQUESTED:"BUFFERING_REQUESTED",PREBUFFERING_COMPLETED:"PREBUFFERING_COMPLETED",BUFFERING_COMPLETED:"BUFFERING_COMPLETED"},l="SET_BUFFERING_STATUS",d=function(e,t,r){return{type:l,playerId:e,bufferingStatus:t,maximumBufferLength:r}},p="SET_TARGET_DURATION",f=function(e,t){return{type:p,targetDuration:t,playerId:e}},h=function(e,t){return{type:"UPDATE_BUFFER_LENGTH",maximumBufferLength:t,playerId:e}};t.e=function(e,t){switch(t.type){case o.b:var r;if(null==e||null===(r=e.features)||void 0===r?void 0:r[a.g]){var n=void 0===e.bufferingStatus?u.IDLE:e.bufferingStatus;return c(c({},e),{},{bufferingStatus:n,maximumBufferLength:void 0,targetDuration:void 0})}return c(c({},e),{},{maximumBufferLength:void 0,targetDuration:void 0});case l:return c(c({},e),{},{bufferingStatus:t.bufferingStatus,maximumBufferLength:void 0!==t.maximumBufferLength?t.maximumBufferLength:e.maximumBufferLength});case"UPDATE_BUFFER_LENGTH":var i;return t.maximumBufferLength===e.maximumBufferLength?e:c(c({},e),{},{bufferingStatus:null!=e&&null!==(i=e.features)&&void 0!==i&&i[a.g]?u.BUFFERING_REQUESTED:void 0,maximumBufferLength:t.maximumBufferLength});case p:return c(c({},e),{},{targetDuration:t.targetDuration});default:return e}};var v={bufferingStatus:void 0,maximumBufferLength:void 0,targetDuration:void 0}},731:function(e,t,r){"use strict";r(325),r(60);var n=r(0),i=r(162),o=Object(i.a)({loader:function(){return Promise.all([r.e(3),r.e(54)]).then(r.bind(null,995))},renderPlaceholder:function(){return n.createElement("div",null)}});t.a=o},794:function(e,t,r){var n=r(53),i=Date.prototype,o=i.toString,a=i.getTime;"Invalid Date"!=String(new Date(NaN))&&n(i,"toString",(function(){var e=a.call(this);return e==e?o.call(this):"Invalid Date"}))},795:function(e,t,r){r(8)({target:"Array",stat:!0},{isArray:r(129)})},796:function(e,t,r){var n=r(458),i=r(455),o=r(348),a=r(459);e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},803:function(e,t,r){var n=r(35).default;function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o},e.exports.default=e.exports,e.exports.__esModule=!0},804:function(e,t,r){"use strict";r(103),r(728),t.__esModule=!0,t.default=t.InitialState=t.updateAudioLevels=t.UPDATE_AUDIO_LEVELS=void 0;t.UPDATE_AUDIO_LEVELS="UPDATE_AUDIO_LEVELS";t.updateAudioLevels=function(e,t){return{type:"UPDATE_AUDIO_LEVELS",audioLevels:t,experienceId:e}};var n={guests:{},host:0};t.InitialState=n;t.default=function(e,t){switch(void 0===e&&(e=n),t.type){case"UPDATE_AUDIO_LEVELS":for(var r=t.audioLevels,i=r[0],o=r.slice(1),a={},s=0;s<o.length;s++)a[s]=o[s];return Object.assign({},e,{guests:a,host:i});default:return e}}},805:function(e,t,r){"use strict";t.__esModule=!0,t.default=t.updateGuestInfo=t.UPDATE_GUEST_INFO=void 0;t.UPDATE_GUEST_INFO="UPDATE_GUEST_INFO";t.updateGuestInfo=function(e,t){return{type:"UPDATE_GUEST_INFO",guestInfo:t,experienceId:e}};t.default=function(e,t){switch(void 0===e&&(e={}),t.type){case"UPDATE_GUEST_INFO":for(var r=t.guestInfo,n={},i=0;i<r.length;i++){var o=r[i],a=o.ParticipantIndex,s=o.ProfileUrl,c=o.SessionId,u=o.StreamName,l=o.UserId,d=o.UserName;n[i]={ParticipantIndex:a,ProfileUrl:s,SessionId:c,StreamName:u,UserId:l,UserName:d}}return n;default:return e}}},806:function(e,t,r){"use strict";var n=r(803),i=r(13);r(728),t.__esModule=!0,t.default=t.resetGuestState=t.RESET_GUEST_STATE=t.teardownExperience=t.TEARDOWN_EXPERIENCE=t.initializeExperience=t.INITIALIZE_EXPERIENCE=void 0;var o=r(976),a=i(r(805)),s=n(r(804));t.INITIALIZE_EXPERIENCE="INITIALIZE_EXPERIENCE";t.initializeExperience=function(e){return{type:"INITIALIZE_EXPERIENCE",experienceId:e}};t.TEARDOWN_EXPERIENCE="TEARDOWN_EXPERIENCE";t.teardownExperience=function(e){return{type:"TEARDOWN_EXPERIENCE",experienceId:e}};t.RESET_GUEST_STATE="RESET_GUEST_STATE";t.resetGuestState=function(e){return{type:"RESET_GUEST_STATE",experienceId:e}};var c={audioLevels:s.InitialState,guests:{}},u=(0,o.combineReducers)({audioLevels:s.default,guests:a.default});t.default=function(e,t,r){var n;if(void 0===e&&(e={}),void 0===r&&(r=u),void 0!==t.experienceId)switch(t.type){case"INITIALIZE_EXPERIENCE":case"RESET_GUEST_STATE":return Object.assign({},e,((n={})[t.experienceId]=c,n));case"TEARDOWN_EXPERIENCE":var i=Object.assign({},e);return delete i[t.experienceId],i;default:var o,a=r(e[t.experienceId],t);return Object.assign({},e,((o={})[t.experienceId]=a,o))}return e}},807:function(e,t,r){"use strict";r.d(t,"a",(function(){return E})),r.d(t,"c",(function(){return g}));var n,i=r(35),o=r.n(i),a=r(1),s=r.n(a),c=(r(17),r(18),r(326),r(589)),u=r(582),l=r(676),d=r(611),p=r(623),f=r(609),h=r(587),v=(n={},s()(n,f.b,l.a.HLSJS_INSTANTIATED),s()(n,f.d,l.a.READY),s()(n,f.f,l.a.PLAYBACK_COMPLETE),s()(n,h.D,l.a.PAUSE),s()(n,h.E,l.a.PLAY),n),y={},E=function(e,t,r){void 0===y[e]&&(y[e]={}),void 0===y[e][t]&&(y[e][t]=[]),y[e][t].push(r)},g=function(e){delete y[e]};t.b=function(e){return function(t){return function(r){var n,i,a=r.playerId,s=r.type,f=e.getState().players[a],E=t(r),g=e.getState().players[a];if(a in y){var b=f.tracks.find((function(e){return"content"===e.displayType})),O=g.tracks.find((function(e){return"content"===e.displayType}));switch(s){case d.c:r.thrownError.message===u.a.LIVE_VIDEO_GEOBLOCK_ERROR?n=l.a.GEOBLOCK_ERROR:r.thrownError.message===u.a.LIVE_VIDEO_NO_COOKIES_ERROR&&(n=l.a.NO_COOKIES_ERROR);break;case h.H:!f.isMuted&&g.isMuted?n=l.a.MUTE:f.isMuted&&!g.isMuted&&(n=l.a.UNMUTE);break;case c.a:if(void 0!==b&&void 0!==O&&(b.isLive&&!O.isLive?n=l.a.LIVE_ENDED:!b.isLive&&O.isLive&&(n=l.a.LIVE_STARTED)),!n&&(f.eventTitle!==g.eventTitle||f.eventDescription!==g.eventDescription||f.eventUrl!==g.eventUrl)){var m=g.eventTitle,T=g.eventDescription,P=g.eventUrl;n=l.a.BROADCAST_EVENT_ASSOCIATION_UPDATED,i={eventTitle:m,eventDescription:T,eventUrl:P}}break;case h.i:f.liveClickthroughClicked!==g.liveClickthroughClicked&&(n=l.a.LIVE_CLICKTHROUGH);break;case p.d:var I=f.fullscreen.isFullscreen,R=g.fullscreen.isFullscreen;!I&&R?n=l.a.FULLSCREEN_ENTERED:I&&!R&&(n=l.a.FULLSCREEN_EXITED);break;default:n=v[s]}!function(e,t,r){t in y[e]&&o()(y[e][t])&&y[e][t].forEach((function(e){"function"==typeof e&&e(r)}))}(a,n,i),n===l.a.READY&&function(e,t){t in y[e]&&delete y[e][t]}(a,n)}return E}}}},808:function(e,t,r){"use strict";var n=r(4),i=r.n(n),o=r(1),a=r.n(o),s=(r(36),r(106),r(336),r(60),r(86),r(88),r(107),function e(t){var r=this;i()(this,e),a()(this,"clearLogs",(function(){try{window.sessionStorage.removeItem(r.storageKey)}catch(e){}})),a()(this,"log",(function(t,n){if(e.debuggingEnabled){var i="".concat(t,": ").concat(n);r.logItemInSessionStorage(i)}})),a()(this,"logItemInSessionStorage",(function(e){try{var t=window.sessionStorage.getItem(r.storageKey),n=t?JSON.parse(t):[];n.push(e),window.sessionStorage.setItem(r.storageKey,JSON.stringify(n))}catch(e){}})),this.storageKey=e.generateStorageKey(t),this.clearLogs()});a()(s,"debuggingEnabled",!1),a()(s,"generateStorageKey",(function(e){return"".concat("TwitterVideoPlayerDebugLog",":").concat(e)})),a()(s,"getDebugFileLink",(function(e){var t=window.sessionStorage.getItem(s.generateStorageKey(e)),r=new window.Blob([JSON.parse(t).join("\n")],{type:"application/octet-stream"});return window.URL.createObjectURL(r)})),t.a=s},809:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return l}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(65),i=r.n(n),o=r(1),a=r.n(o);r(326),r(62),r(36),r(613),r(587);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e,t){return{type:"AD_LOADED",playerId:e,adResponse:t}};t.c=function(e,t){switch(t.type){case"AD_LOADED":var r=e.tracks,n=t.adResponse;if(void 0===n.mediaInfo)return c(c({},e),{},{adLoaded:!0});var o=n.mediaInfo.variants.find((function(e){return 0===e.content_type.indexOf("application/x-mpegURL")}));if(void 0===o)return c(c({},e),{},{adLoaded:!0});var a,s=n.promotedContent||{};return n.mediaInfo.call_to_action&&(a={type:n.mediaInfo.call_to_action.type,url:n.mediaInfo.call_to_action.url}),c(c({},e),{},{currentTrackId:1,nextTrackIds:[0],tracks:[].concat(i()(r),[{id:1,displayType:"ad",cta:a,contentId:n.adId,contentType:"media_entity",publisherId:n.mediaInfo.publisher_id_str,durationMs:n.mediaInfo.duration_millis,shouldLoop:!1,shouldAutoAdvance:n.shouldAutoAdvance,impressionId:s.impressionId,disclosureType:s.disclosureType,dynamicPrerollType:n.dynamicPrerollType,rotation:0,variants:[{src:o.url,type:o.content_type}],currentVariantIndex:0,advertiserName:n.advertiserName,advertiserProfileImageUrl:n.advertiserProfileImageUrl,useRedesignedPrerollUx:n.useRedesignedPrerollUx}]),videoAnalyticsScribePassthrough:n.videoAnalyticsScribePassthrough,adLoaded:!0});default:return e}};var l={adLoaded:!1}},810:function(e,t,r){"use strict";r.d(t,"b",(function(){return s}));var n=r(1),i=r.n(n),o=r(589),a=r(612),s=function(e,t){return{feature:t,playerId:e,type:"GET_FEATURE_VALUE"}};t.a=function(e){return function(t){return function(r){if("GET_FEATURE_VALUE"===r.type){var n,s=r.feature,c=r.playerId,u=Object(a.a)(c);return u&&u.getValue&&(n=u.getValue(s),e.dispatch(Object(o.i)(c,i()({},s,n)))),n}return t(r)}}}},811:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));var n=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){}},i=function(e,t){try{return window.localStorage.getItem(e)}catch(e){return t}}},812:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e){return{type:"BANDWIDTH_ESTIMATE",bandwidthEstimate:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BANDWIDTH_ESTIMATE":return a(a({},e),{},{mostRecentBandwidthEst:t.bandwidthEstimate});default:return e}}},824:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));r(23),r(45),r(30),r(40),r(17),r(18),r(46);var n=r(1),i=r.n(n),o=r(0),a=r(24),s=r(328),c=r(118),u=r.n(c),l=r(569),d=r(570),p=r(84);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p.a)("svg",h(h({},e),{},{accessibilityHidden:void 0===e.accessibilityLabel,style:[d.a.root,e.style],viewBox:"0 0 24 24"}),l.createElement("g",null,l.createElement("path",{d:"M15.644 11.58L10.43 8.26c-.155-.1-.35-.105-.51-.018-.16.088-.26.256-.26.438v6.64c0 .183.1.35.26.438.074.04.157.062.24.062.093 0 .187-.026.27-.078l5.214-3.32c.144-.09.23-.25.23-.42s-.086-.332-.23-.423zM2.5 22.25c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06l5.25-5.25c.293-.294.768-.294 1.06 0s.294.767 0 1.06l-5.25 5.25c-.146.147-.338.22-.53.22zM15.208 9.542c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06L20.97 1.97c.293-.293.768-.293 1.06 0s.294.768 0 1.06l-6.29 6.293c-.148.146-.34.22-.532.22z"}),l.createElement("path",{d:"M3.815 17.062c-.27 0-.53-.146-.664-.4C2.4 15.236 2 13.623 2 12 2 6.486 6.486 2 12 2c1.592 0 3.176.384 4.582 1.11.368.188.512.64.322 1.01-.19.368-.643.515-1.01.32-1.21-.624-2.52-.94-3.894-.94-4.687 0-8.5 3.813-8.5 8.5 0 1.38.338 2.75.978 3.96.193.367.053.82-.313 1.015-.112.06-.232.087-.35.087zM12 22c-1.59 0-3.175-.384-4.58-1.11-.37-.188-.513-.64-.323-1.01.19-.366.644-.514 1.01-.32 1.21.624 2.52.94 3.893.94 4.687 0 8.5-3.813 8.5-8.5 0-1.364-.33-2.72-.957-3.922-.19-.367-.05-.82.318-1.012.37-.19.82-.05 1.013.318C21.61 8.8 22 10.396 22 12c0 5.514-4.486 10-10 10z"})))};v.metadata={width:24,height:24};var y=v,E=r(3),g=r(580),b=r(39);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=u.a.a9edea48;function P(e){var t=e.displayBackgroundImage,r=void 0!==t&&t,n=e.errorMessage,i=e.iconPlayError,c=e.imageSrc,u=e.onReloadPress;return o.createElement(b.a,{style:[E.a.absoluteFill,r?null:I.blankOverlay]},r?o.createElement(o.Fragment,null,o.createElement(b.a,{style:I.backgroundImage},c&&o.createElement(g.a,{resizeMode:"cover",source:c,style:E.a.absoluteFill})),o.createElement(b.a,{style:I.overlay})):null,o.createElement(b.a,{style:I.errorContainer},o.createElement(b.a,null,i?o.createElement(y,{style:I.playErrorIcon}):null),o.createElement(b.a,{focusable:!0},o.createElement(a.c,{style:r?I.errorMsgTextWhite:I.errorMsgTextGray},n)),u?o.createElement(s.a,{onPress:u,style:I.buttonContainer,type:"primary"},T):null))}var I=E.a.create((function(e){return{backgroundImage:m(m({},E.a.absoluteFillObject),{},{filter:"blur(5px)"}),overlay:m(m({},E.a.absoluteFillObject),{},{backgroundColor:e.colors.translucentBlack77}),blankOverlay:{backgroundColor:e.colors.gray0},buttonContainer:{justifyContent:"center",alignSelf:"center"},errorContainer:{justifyContent:"center",height:"100%",marginHorizontal:e.spaces.space32},errorMsgTextWhite:{color:e.colors.white,textAlign:"center",marginBottom:e.spaces.space20},errorMsgTextGray:{color:e.colors.gray700,textAlign:"center",marginBottom:e.spaces.space20},playErrorIcon:{fill:e.colors.gray700,height:e.spaces.space48,width:e.spaces.space48,marginHorizontal:"auto",paddingBottom:e.spaces.space20,textAlignVertical:"middle"}}}))},968:function(e,t,r){"use strict";(function(e){r(45),r(30),r(40),r(46);var n=r(4),i=r.n(n),o=r(5),a=r.n(o),s=r(1),c=r.n(s),u=(r(17),r(18),r(62),r(325),r(60),r(23),r(587)),l=r(582),d=r(676),p=r(610),f=r(979),h=r(808),v=r(609),y=r(591),E=r(611),g=r(977),b=r(978),O=r(622),m=r(996),T=r(691),P=r(969),I=r.n(P),R=r(998),_=r(807),S=r(589),w=r(612),C=r(613),k=r(727),A=r(623);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=function(){function t(r){var n=this,o=r.source,a=void 0===o?{}:o,s=r.videoConfig,l=r.domElement,P=r.httpClient,R=r.twitterAuthedHttpClient,D=r.options,L=void 0===D?{}:D;i()(this,t),c()(this,"teardown",(function(){n.broadcastUpdater&&n.broadcastUpdater.cancelUpdate(),n.unsubscribeCalls.forEach((function(e){e()})),n.unsubscribeCalls=[],Object(_.c)(n.id),n.source=void 0,n.session=void 0,void 0!==n.hydraExperienceId&&m.a.dispatch(Object(k.teardownExperience)(n.hydraExperienceId)),n.video&&n.video.teardown(),m.a.dispatch(Object(T.c)(n.id)),Object(w.h)(n.id),n.logger.clearLogs(),n.rejectPlayerReadyPromise()})),c()(this,"play",(function(){return n.initiallyMuted?n.playPreview():n.playerReadyPromise.then((function(){n._dispatch(u.Y(n.id))})),n})),c()(this,"pause",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.V(n.id))})),n})),c()(this,"replay",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.bb(n.id))})),n})),c()(this,"mute",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.U(n.id))})),n})),c()(this,"unmute",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.db(n.id))})),n})),c()(this,"scrubToFraction",(function(e){return n.playerReadyPromise.then((function(){n._dispatch(u.cb(n.id,e))})),n})),c()(this,"setVolume",(function(e){return n.playerReadyPromise.then((function(){n._dispatch(u.eb(n.id,e))})),n})),c()(this,"setPlaybackRate",(function(e){return n.playerReadyPromise.then((function(){n._dispatch(u.Z(n.id,e))})),n})),c()(this,"setPlaybackTimeRange",(function(e){var t=e.startTimeS,r=e.endTimeS;return n.playerReadyPromise.then((function(){t<=0&&r>=n.video.getVideoTag().duration?n._dispatch(u.L(n.id)):n._dispatch(u.ab(n.id,t,r))})),n})),c()(this,"fullScreen",(function(e){var t=e||n.domElement;return m.a.dispatch(Object(A.f)(n.id,t,n.video.getVideoTag())),n})),c()(this,"exitFullScreen",(function(){return m.a.dispatch(Object(A.g)(n.id)),n})),c()(this,"hideControls",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.O(n.id))})),n})),c()(this,"showControls",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.fb(n.id))})),n})),c()(this,"playPreview",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n.playerReadyPromise.then((function(){var t=m.a.getState(),r=t&&t.players&&t.players[n.id]||{},i=r.isPreview,o=r.hasPlaybackStarted;!i&&o||e?n._dispatch(u.Y(n.id)):(n._dispatch(Object(C.f)(n.id)),n.initiallyMuted&&(n.initiallyMuted=!1))})),n})),c()(this,"pausePreview",(function(){return n.playerReadyPromise.then((function(){var e=m.a.getState();(e&&e.players&&e.players[n.id]||{}).isPreview?n._dispatch(Object(C.e)(n.id)):n._dispatch(u.V(n.id))})),n})),c()(this,"objectFitVideo",(function(e){return-1!==y.d.indexOf(e)&&n.video&&(n.video.objectFitVideo=e),n})),c()(this,"toggleCaptions",(function(){return n.playerReadyPromise.then((function(){var e=m.a.getState(),t=e&&e.players&&e.players[n.id],r=!(!t||!t.areCaptionsShown);n._dispatch(r?u.S(n.id,!0):u.T(n.id,!0))})),n})),c()(this,"togglePiPMode",(function(){return n.playerReadyPromise.then((function(){var e=m.a.getState(),t=e&&e.players&&e.players[n.id],r=!(!t||!t.inPiPMode);n._dispatch(r?u.W(n.id):u.X(n.id))})),n})),c()(this,"nextTrack",(function(){return n.playerReadyPromise.then((function(){n._dispatch(Object(v.o)(n.id))})),n})),c()(this,"triggerError",(function(e){var t=new Error(e||"synthetic");return m.a.dispatch(Object(E.h)(n.id,t)),n})),c()(this,"reload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.requestedTimecode,r=e.autoPlay,i=void 0!==r&&r;n.playerReadyPromise=new Promise((function(e,t){n.resolvePlayerReadyPromise=e,n.rejectPlayerReadyPromise=t})).catch((function(){}));var o=m.a.getState()||{players:{}},a=o.players[n.id],s=-1;if(a){if(void 0!==t)n.playerOptions.requestedTimecode=t;else if(0===a.currentTrackId){var c=Object(p.b)(a);s=c.currentTimeMs/1e3}var l=a.isPreview,d=a.isPlaying,f=a.isMuted,h=d||i;n.playerReadyPromise.then((function(){l?h?n._dispatch(Object(C.f)(n.id)):n._dispatch(Object(C.e)(n.id)):(h&&n._dispatch(u.Y(n.id)),f&&n._dispatch(u.U(n.id)))}))}return n.video&&n.video.teardownPlayer(),m.a.dispatch(n._reloadPlayer(n.id,n.source,n.videoConfig,n.session,n.resolvePlayerReadyPromise,n.rejectPlayerReadyPromise,j(j({},n.playerOptions),{},{reloadTimecode:s}),n.logger)),n})),c()(this,"on",(function(e,t){return Object.keys(d.a).forEach((function(r){d.a[r]===e&&Object(_.a)(n.id,e,t)})),n})),c()(this,"updatePosition",(function(e){var t=e.percentVisible,r=e.percentOfViewportOccupied,i=e.sizesInfo;return n.playerReadyPromise.then((function(){n._dispatch(u.gb(n.id,t,r,i))})),n})),c()(this,"callToActionClicked",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.J(n.id))})),n})),c()(this,"callToActionImpression",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.K(n.id))})),n})),c()(this,"liveClickthroughClicked",(function(){return n.playerReadyPromise.then((function(){n._dispatch(u.P(n.id))})),n})),c()(this,"subscribe",(function(e){var t=m.a.getState(),r=n._getPlayerState(t),i=n._getHydraState(t),o=m.a.subscribe((function(){var t=m.a.getState(),o=n._getPlayerState(t),a=n._getHydraState(t);void 0!==o&&(r!==o||i!==a)&&(r=o,i=a,e(o,a))}));return n.unsubscribeCalls.push(o),o})),c()(this,"onStoreUpdate",(function(e){var t=Object(p.b)(e),r="ad"===(null==t?void 0:t.displayType),i=e.errorInfo,o=i.adFailed,a=i.autoRetry,s=i.backoffMs,c=r&&o&&!1!==t.shouldAutoAdvance;(a||c)&&setTimeout((function(){n.reload()}),(c?0:s)||0)})),this.id=t.id,t.id+=1,this.unsubscribeCalls=[],this.source=a,this.videoConfig=s,this.session={id:I()()},this.playbackSessionId=L.playbackSessionId,this.initiallyMuted=L.initiallyMuted,this._reloadPlayer=S.j,this.playerReadyPromise=new Promise((function(e,t){n.resolvePlayerReadyPromise=e,n.rejectPlayerReadyPromise=t})).then(Promise.resolve()).catch((function(){})),L.autoplay&&this.play(),this.logger=new h.a(this.id),e.VIDEO_PLAYER_DEBUG_ENABLED&&(h.a.debuggingEnabled=!0),Object(w.f)(this.id,new g.a(new b.a(P)),new g.a(new b.a(R||P)),this.logger,new f.a,L.featureProvider),this.subscribe(this.onStoreUpdate),this.source.type!==O.a.BROADCAST&&this.source.type!==O.a.STATIC_BROADCAST&&this.source.type!==O.a.AUDIO_SPACE||(this.hydraExperienceId=L.hydraExperienceId=m.a.dispatch(Object(k.registerExperience)())),this.options=L;var U=-1,N=this.playbackSessionId?Object(w.g)(this.playbackSessionId):void 0;N&&(this.options.videoEl=L.videoEl||N.videoEl,U=N.reloadTimecode);var x=this.options,M=x.bitrateCap,F=x.featureProvider,V=x.includeBroadcastEventAssociation,B=x.initiallyMutedCaptions,G=x.intentToPlayTime,H=x.maxLoopCount,Q=x.promotedContext,K=x.requestedTimecode,J=x.showGeolocationPrompt;this.playerOptions={bitrateCap:M,featureProvider:F,includeBroadcastEventAssociation:V,initiallyMutedCaptions:B,intentToPlayTime:G,maxLoopCount:H,promotedContext:Q,reloadTimecode:U,requestedTimecode:K,showGeolocationPrompt:J},m.a.dispatch(Object(S.g)(this.id,a,s,this.session,L.analytics,L.adProvider,this.resolvePlayerReadyPromise,this.rejectPlayerReadyPromise,this.playerOptions,this.logger)).then((function(e){n.broadcastUpdater=e})),l&&this.attach(l)}return a()(t,[{key:"attach",value:function(e){this.video||(this.domElement=e,this.video=new R.a(this.domElement,this.id,m.a,this.reload,this.logger,this.options))}},{key:"_getPlayerState",value:function(e){if(e.players)return e.players[this.id]}},{key:"_getHydraState",value:function(e){if(void 0!==this.hydraExperienceId&&e.hydraExperiences)return e.hydraExperiences[this.hydraExperienceId]}},{key:"_dispatch",value:function(e){var t=m.a.getState();this._getPlayerState(t)?m.a.dispatch(e):this.triggerError(l.a.MEDIA_TEARDOWN_ERROR)}}]),t}();c()(L,"id",0),t.a=L}).call(this,r(156))},969:function(e,t,r){var n=r(970),i=r(971);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},970:function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},971:function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},972:function(e,t,r){"use strict";var n=r(13);r(85),r(205),r(973),r(975),r(23),t.__esModule=!0,t.default=t.registerExperience=t.REGISTER_EXPERIENCE=void 0;var i=n(r(65)),o=r(806);t.REGISTER_EXPERIENCE="REGISTER_EXPERIENCE";t.registerExperience=function(){return{type:"REGISTER_EXPERIENCE"}};t.default=function(e){return function(t){return function(r){switch(r.type){case"REGISTER_EXPERIENCE":var n=e.getState(),a=Object.keys(n.hydraExperiences||{}).map((function(e){return Number.parseInt(e,10)})),s=Math.max.apply(Math,(0,i.default)(a))+1;return Number.isFinite(s)||(s=0),e.dispatch((0,o.initializeExperience)(s)),s;default:return t(r)}}}}},973:function(e,t,r){r(8)({target:"Number",stat:!0},{isFinite:r(974)})},974:function(e,t,r){var n=r(12).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&n(e)}},975:function(e,t,r){var n=r(8),i=r(462);n({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},976:function(e,t,r){"use strict";r(80),r(23),t.__esModule=!0,t.combineReducers=void 0;t.combineReducers=function(e){return function(t,r){return Object.keys(e).reduce((function(n,i){return n[i]=e[i](t[i],r),n}),{})}}},977:function(e,t,r){"use strict";var n=r(4),i=r.n(n),o=r(5),a=r.n(o),s=(r(36),r(643)),c={},u=function(){function e(t){i()(this,e),this.httpClient=t}return a()(e,[{key:"dispatch",value:function(e){if("get"===e.method.toLowerCase()){var t=e.params?Object(s.b)(e.params):"",r=t?"?".concat(t):"",n="".concat(e.host).concat(e.path).concat(r);return c[n]||(c[n]=this.httpClient.dispatch(e).then((function(e){return delete c[n],e})).catch((function(e){throw delete c[n],e}))),c[n]}return this.httpClient.dispatch(e)}}]),e}();t.a=u},978:function(e,t,r){"use strict";var n=r(4),i=r.n(n),o=r(5),a=r.n(o),s=(r(325),r(60),function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;i()(this,e),this.httpClient=t,this.backOffMSec=r}return a()(e,[{key:"dispatch",value:function(e){var t=this;return new Promise((function(r,n){t._dispatchOnce(0,r,n,e)}))}},{key:"_dispatchOnce",value:function(e,t,r,n){var i=this;this.httpClient.dispatch(n).then((function(o){i._handleResponse(e,t,r,n,o)})).catch((function(o){i._handleReject(e,t,r,n,o)}))}},{key:"_handleResponse",value:function(e,t,r,n,i){var o=this,a=!1;switch(i.status){case 404:case 425:case 429:case 500:case 502:case 503:case 504:case 508:a=!0}!a||e>=3?t(i):setTimeout((function(){o._dispatchOnce(e+1,t,r,n)}),this._backOffMSec(e))}},{key:"_handleReject",value:function(e,t,r,n,i){var o=this;e>=3?r(i):setTimeout((function(){o._dispatchOnce(e+1,t,r,n)}),this._backOffMSec(e))}},{key:"_backOffMSec",value:function(e){var t=this.backOffMSec,r=Math.pow(3,e)*t;return t+Math.random()*(r-t)}}]),e}());t.a=s},979:function(e,t,r){"use strict";var n=r(4),i=r.n(n),o=r(5),a=r.n(o),s=function(){function e(){i()(this,e),this.byteAccumulator=0}return a()(e,[{key:"add",value:function(e){this.byteAccumulator+=e}},{key:"getAndReset",value:function(){var e=this.byteAccumulator;return this.byteAccumulator=0,e}}]),e}();t.a=s},980:function(e,t,r){"use strict";var n=r(8),i=r(98),o=r(453),a=r(11),s=r(83),c=r(22),u=r(347),l=r(454),d=r(53);if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,s("Promise")),r=c(e);return this.then(r?function(r){return l(t,e()).then((function(){return r}))}:e,r?function(r){return l(t,e()).then((function(){throw r}))}:e)}}),!i&&c(o)){var p=s("Promise").prototype.finally;o.prototype.finally!==p&&d(o.prototype,"finally",p,{unsafe:!0})}},996:function(e,t,r){"use strict";var n=r(809),i=r(691),o=r(589),a={},s=r(812),c=(r(326),r(587)),u=r(612),l=r(613),d=r(611),p=r(609),f={},h=r(677),v=r(623),y=r(807),E=r(810),g=(r(23),r(45),r(30),r(40),r(17),r(18),r(46),r(4)),b=r.n(g),O=r(5),m=r.n(O),T=r(1),P=r.n(T);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R=function(){function e(t){var r=this;b()(this,e),P()(this,"onNativeFullscreenBegin",(function(){r.setFullscreen(!0)})),P()(this,"onNativeFullscreenEnd",(function(){r.setFullscreen(!1)})),P()(this,"onFullscreenChanged",(function(){var e=(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===r.fullscreenTarget;e||(r.fullscreenTarget=void 0,r.removeDocumentListeners()),r.setFullscreen(e)})),P()(this,"expand",(function(e,t,n){t&&(r.expandTimeout=setTimeout((function(){r.setFullscreen(!1)}),1e3),r.fullscreenTarget&&(r.fullscreenTarget.removeEventListener("touchstart",r._swipeStart),r.fullscreenTarget.removeEventListener("transitionend",r._fullscreenTransitionEnd),r.setFullscreen(!1)),r.fullscreenTarget=t,r.playerId=e,r.addDocumentListeners(),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitEnterFullscreen?(r.addElementListeners(t),t.webkitEnterFullscreen()):null!=n&&n.webkitEnterFullscreen?(r.fullscreenTarget=n,r.addElementListeners(n),n.webkitEnterFullscreen()):(r.removeDocumentListeners(),r.removeElementListeners(),r.nonFullscreenStyle=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.style),r.nonFullscreenPosition=t.getBoundingClientRect(),t.style.position="fixed",t.style.width="".concat(r.nonFullscreenPosition.right-r.nonFullscreenPosition.left,"px"),t.style.height="".concat(r.nonFullscreenPosition.bottom-r.nonFullscreenPosition.top,"px"),t.style.top="".concat(r.nonFullscreenPosition.top,"px"),t.style.left="".concat(r.nonFullscreenPosition.left,"px"),t.style.zIndex="100",window.requestAnimationFrame((function(){t.style.transition="width 0.25s, height 0.25s, top 0.25s, left 0.25s",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.addEventListener("transitionend",r._fullscreenTransitionEnd)}))))})),P()(this,"shrink",(function(e){e===r.playerId&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():r.fullscreenTarget.webkitExitFullscreen?r.fullscreenTarget.webkitExitFullscreen():(r.fullscreenTarget.style.width="".concat(r.nonFullscreenPosition.right-r.nonFullscreenPosition.left,"px"),r.fullscreenTarget.style.height="".concat(r.nonFullscreenPosition.bottom-r.nonFullscreenPosition.top,"px"),r.fullscreenTarget.style.top="".concat(r.nonFullscreenPosition.top,"px"),r.fullscreenTarget.style.left="".concat(r.nonFullscreenPosition.left,"px"),r.fullscreenTarget.style.transition="width 0.25s, height 0.25s, top 0.25s, left 0.25s",r.fullscreenTarget.addEventListener("transitionend",r._shrinkTransitionEnd),r.fullscreenTarget.removeEventListener("touchstart",r._swipeStart)))})),P()(this,"_swipeStart",(function(e){r.addSwipeListeners(),r.touchStart=e.touches[0]})),P()(this,"_swipeMove",(function(e){e.preventDefault();var t=e.touches[0].pageY-r.touchStart.pageY;r.swipeVector=Math.abs(t);var n=t/r.swipeVector*Math.min(r.swipeVector,r.swipeVector/(r.swipeVector+3*r.fullscreenTarget.clientHeight/4)*r.fullscreenTarget.clientHeight*1/2);r.fullscreenTarget.style.top="".concat(n,"px")})),P()(this,"_swipeEnd",(function(){r.removeSwipeListeners(),r.swipeVector>r.fullscreenTarget.clientHeight/4?r.shrink(r.playerId):r.fullscreenTarget.style.top="0"})),P()(this,"_fullscreenTransitionEnd",(function(){r.fullscreenTarget.style.transition="",r.fullscreenTarget.removeEventListener("transitionend",r._fullscreenTransitionEnd),r.fullscreenTarget.addEventListener("touchstart",r._swipeStart),r.setFullscreen(!0)})),P()(this,"_shrinkTransitionEnd",(function(){r.fullscreenTarget.removeEventListener("transitionend",r._shrinkTransitionEnd),r.fullscreenTarget.style.transition="",r.fullscreenTarget.style.position=r.nonFullscreenStyle.position,r.fullscreenTarget.style.width=r.nonFullscreenStyle.width,r.fullscreenTarget.style.height=r.nonFullscreenStyle.height,r.fullscreenTarget.style.top=r.nonFullscreenStyle.top,r.fullscreenTarget.style.left=r.nonFullscreenStyle.left,r.fullscreenTarget.style.zIndex=r.nonFullscreenStyle.zIndex,r.setFullscreen(!1),r.fullscreenTarget=void 0})),this.fullscreenTarget=void 0,this.playerId=void 0,this.onChange=t,this.isFullscreen=!1}return m()(e,[{key:"addDocumentListeners",value:function(){document.addEventListener("webkitfullscreenchange",this.onFullscreenChanged),document.addEventListener("mozfullscreenchange",this.onFullscreenChanged),document.addEventListener("MSFullscreenChange",this.onFullscreenChanged),document.addEventListener("fullscreenchange",this.onFullscreenChanged)}},{key:"removeDocumentListeners",value:function(){document.removeEventListener("webkitfullscreenchange",this.onFullscreenChanged),document.removeEventListener("mozfullscreenchange",this.onFullscreenChanged),document.removeEventListener("MSFullscreenChange",this.onFullscreenChanged),document.removeEventListener("fullscreenchange",this.onFullscreenChanged)}},{key:"addSwipeListeners",value:function(){document.addEventListener("touchend",this._swipeEnd),document.addEventListener("touchmove",this._swipeMove)}},{key:"addElementListeners",value:function(e){e.addEventListener("webkitbeginfullscreen",this.onNativeFullscreenBegin),e.addEventListener("webkitendfullscreen",this.onNativeFullscreenEnd)}},{key:"removeElementListeners",value:function(){var e=this.fullscreenTarget;e&&(e.removeEventListener("webkitbeginfullscreen",this.onNativeFullscreenBegin),e.removeEventListener("webkitendfullscreen",this.onNativeFullscreenEnd),e.removeEventListener("transitionend",this._fullscreenTransitionEnd),e.removeEventListener("transitionend",this._shrinkTransitionEnd))}},{key:"removeSwipeListeners",value:function(){document.removeEventListener("touchend",this._swipeEnd),document.removeEventListener("touchmove",this._swipeMove)}},{key:"setFullscreen",value:function(e){clearTimeout(this.expandTimeout),this.onChange(this.playerId,e),e||(this.cleanup(),this.fullscreenTarget=void 0,this.playerId=void 0)}},{key:"cleanup",value:function(){clearTimeout(this.expandTimeout),this.removeDocumentListeners(),this.removeElementListeners(),this.removeSwipeListeners()}}]),e}(),_=(r(342),r(811));function S(e){Object(_.b)("captions",e)}r(327);var w=r(591),C=r(675),k=r(730),A=k.a.BUFFERING_COMPLETED,D=k.a.BUFFERING_REQUESTED,j=k.a.IDLE,L=k.a.PREBUFFERING_COMPLETED,U=function(e,t){Object.keys(t).forEach((function(r){r=parseInt(r,10);var n=(null==t?void 0:t[r])||{},i=n.bufferingStatus,o=n.targetDuration;!(i===A)&&void 0!==i&&!(i===L)&&o&&e.dispatch(Object(k.f)(r,D,w.c*o))}))};function N(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var x=N();x.withExtraArgument=N;var M=x;function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var H="function"==typeof Symbol&&Symbol.observable||"@@observable",Q=function(){return Math.random().toString(36).substring(7).split("").join(".")},K={INIT:"@@redux/INIT"+Q(),REPLACE:"@@redux/REPLACE"+Q(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Q()}};function J(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function W(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Y=r(727),q=r.n(Y),z=[function(e){return function(t){return function(r){switch(r.type){case o.c:a[r.playerId]=function(){return"function"==typeof r.adProvider?r.adProvider():{}};break;case i.a:delete a[r.playerId];break;case o.b:var s,c=e.getState().players[r.playerId];if(a[r.playerId]&&c&&(null===(s=c.errorInfo)||void 0===s||!s.adFailed)){var u=a[r.playerId]();e.dispatch(Object(n.b)(r.playerId,u))}}return t(r)}}},function(e){return function(t){return function(r){switch(r.type){case l.c:var n=Object(h.c)(e,r.playerId)||{},i=n.initiallyMutedCaptions,o=n.userSpecifiedCaptions;i&&!o&&e.dispatch(Object(c.T)(r.playerId,!1));break;case c.u:case c.x:case c.z:case c.A:case c.y:case v.b:var a=Object(h.c)(e,r.playerId)||{},s=a.isPreview,u=a.userSpecifiedCaptions;s&&!u&&e.dispatch(Object(c.S)(r.playerId,!1))}return t(r)}}},E.a,function(e){var t=new R((function(t,r){e.dispatch(Object(v.h)(t,r))}));return function(r){return function(n){var i=e.getState().players[n.playerId],o=n.type;return!i||o!==v.b&&o!==v.c||(o===v.b?(e.dispatch(Object(v.h)(n.playerId,!0)),t.expand(n.playerId,n.containerEl,n.videoEl)):t.shrink(n.playerId)),r(n)}}},function(e){return function(t){return function(r){switch(r.type){case o.c:switch(e.dispatch(Object(c.eb)(r.playerId,(i=parseFloat(Object(_.a)("volume")),isNaN(i)?1:i))),function(){var e,t=Object(_.a)("captions");if("ENABLED"===(e=t)||"DISABLED"===e)return t}()){case"ENABLED":e.dispatch(Object(c.T)(r.playerId,!0));break;case"DISABLED":e.dispatch(Object(c.S)(r.playerId,!0))}break;case c.H:(n=r.volume)>=0&&null!==n&&Object(_.b)("volume",n);break;case c.p:r.isUserSet&&S("ENABLED");break;case c.o:r.isUserSet&&S("DISABLED")}var n,i;return t(r)}}},function(e){return function(t){return function(r){var n,i=e.getState().players,o=i[r.playerId],a=o||{},s=a.bufferingStatus,u=a.targetDuration,d=null==o||null===(n=o.features)||void 0===n?void 0:n[C.g];switch(r.type){case l.b:case c.r:d&&void 0!==s&&U(e,i);break;case l.c:case c.u:if(d&&void 0!==s){var p=s===A;if(u){var f=u*w.c;e.dispatch(Object(k.h)(r.playerId,f))}p||function(e,t,r){Object.keys(t).forEach((function(n){n=parseInt(n,10);var i=(null==t?void 0:t[n])||{},o=i.bufferingStatus,a=i.controls,s=i.isPlaying,c=void 0!==o,u=o===A,l=o===L,d="PLAY_REQUESTED"===(null==a?void 0:a.playState)||s;!u&&!d&&c&&n!==r&&!l&&e.dispatch(Object(k.f)(n,j,0))}))}(e,i,r.playerId)}break;case k.c:if(d){var v,y=r.bufferingStatus===A,E="PLAY_REQUESTED"===(null==o||null===(v=o.controls)||void 0===v?void 0:v.playState)||(null==o?void 0:o.isPlaying);y&&E&&U(e,i)}break;case k.d:if(r.targetDuration&&d){var g=Object(h.b)(i,(function(e){var t;return((null==e?void 0:e.isPlaying)||"PLAY_REQUESTED"===(null==e||null===(t=e.controls)||void 0===t?void 0:t.playState))&&void 0!==(null==e?void 0:e.bufferingStatus)&&(null==e?void 0:e.bufferingStatus)!==A}));if(void 0===g||g.playerId===r.playerId){var b=r.targetDuration*w.c;e.dispatch(Object(k.h)(r.playerId,b))}else g.playerId!==r.playerId&&e.dispatch(Object(k.f)(r.playerId,j,0))}else if(r.targetDuration){var O=r.targetDuration*w.c;e.dispatch(Object(k.h)(r.playerId,O))}}return t(r)}}},function(e){return function(t){return function(r){if(void 0!==r.playerId&&Object(u.d)(r.playerId,(function(e){e.log("redux",r.type)})),r.type===o.c)return f[r.playerId]=r.analytics,t(r);var n=e.getState().players[r.playerId];if(!n)return t(r);var a=t(r),s=e.getState().players[r.playerId],h=f[r.playerId];if(void 0!==h){switch(r.type){case p.e:case c.G:h.onTickEvent(s);break;case p.f:h.onTrackFinished(n),s.currentTrackId!==n.currentTrackId&&h.onIntendToPlay(s);break;case p.c:var v,y=n.tracks.find((function(e){return e.id===n.currentTrackId}));"ad"!==y.displayType||y.playbackCompleted||!n||null!==(v=n.errorInfo)&&void 0!==v&&v.adFailed||h.onAdSkip(n),s.currentTrackId!==n.currentTrackId&&h.onIntendToPlay(s);break;case c.u:case l.c:h.onIntendToPlay(s);break;case c.x:h.onReplay(s);break;case c.H:n.isMuted&&!s.isMuted?h.onUnmute(n):!n.isMuted&&s.isMuted&&h.onMute(n);break;case c.b:h.onCtaClick(n);break;case c.c:h.onCtaImpression(n);break;case i.a:h.onTeardown(n),delete f[r.playerId];break;case o.b:h.onConfigLoaded(s);break;case d.a:case d.c:var E,g=s.errorInfo,b=g.autoRetry?g.count:void 0;E=r.type===d.a||r.type===d.c?r.thrownError.message:r.error,h.onError(n,{error_code:r.type,error_message:E,media_details:{media_error:{category:r.type,is_fatal:r.isFatal,message:E,retry_count:b}}});break;case c.l:var O=n.playbackRate,m={newSpeed:s.playbackRate,oldSpeed:O};h.onPlaybackSpeedChange(s,m)}s&&s.isPlaying!==n.isPlaying&&(s.isPlaying?h.onPlay(s):h.onPause(s))}return a}}},y.b,Y.hydraMiddleware,M];t.a=function e(t,r,n){var i;if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(G(0));if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw new Error(G(1));return n(e)(t,r)}if("function"!=typeof t)throw new Error(G(2));var o=t,a=r,s=[],c=s,u=!1;function l(){c===s&&(c=s.slice())}function d(){if(u)throw new Error(G(3));return a}function p(e){if("function"!=typeof e)throw new Error(G(4));if(u)throw new Error(G(5));var t=!0;return l(),c.push(e),function(){if(t){if(u)throw new Error(G(6));t=!1,l();var r=c.indexOf(e);c.splice(r,1),s=null}}}function f(e){if(!J(e))throw new Error(G(7));if(void 0===e.type)throw new Error(G(8));if(u)throw new Error(G(9));try{u=!0,a=o(a,e)}finally{u=!1}for(var t=s=c,r=0;r<t.length;r++){(0,t[r])()}return e}function h(e){if("function"!=typeof e)throw new Error(G(10));o=e,f({type:K.REPLACE})}function v(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(G(11));function r(){e.next&&e.next(d())}return r(),{unsubscribe:t(r)}}})[H]=function(){return this},e}return f({type:K.INIT}),(i={dispatch:f,subscribe:p,getState:d,replaceReducer:h})[H]=v,i}(function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];0,"function"==typeof e[i]&&(r[i]=e[i])}var o,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:K.INIT}))throw new Error(G(12));if(void 0===r(void 0,{type:K.PROBE_UNKNOWN_ACTION()}))throw new Error(G(13))}))}(r)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var n=!1,i={},s=0;s<a.length;s++){var c=a[s],u=r[c],l=e[c],d=u(l,t);if(void 0===d){t&&t.type;throw new Error(G(14))}i[c]=d,n=n||d!==l}return(n=n||a.length!==Object.keys(e).length)?i:e}}({players:i.b,hydraExperiences:q.a,allPlayers:s.b}),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(G(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return n=W.apply(void 0,o)(r.dispatch),B(B({},r),{},{dispatch:n})}}}.apply(void 0,z))},998:function(e,t,r){"use strict";r(330),r(86),r(45),r(203),r(628),r(88),r(107),r(30),r(40),r(17),r(18),r(46);var n=r(65),i=r.n(n),o=r(4),a=r.n(o),s=r(5),c=r.n(s),u=r(1),l=r.n(u),d=(r(325),r(60),r(36),r(106),r(206),r(19),r(103),r(329),r(23),r(566),r(980),r(326),r(587)),p=r(812),f=r(582),h=r(610),v=r(810),y=r(612),E=(r(67),r(7)),g=r.n(E),b=r(20),O=r.n(b),m=r(21),T=r.n(m),P=r(10),I=r.n(P);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T()(this,r)}}var _=r(643),S=r(609),w=r(730),C=r(591),k=(r(62),r(729)),A=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=t();return r>0?i.catch((function(i){return new Promise((function(i){setTimeout((function(){i(e(t,r-1,2*n))}),n)}))})):i},D="application/x-mpegURL",j=function(e){var t;switch(e){case"0.13.2":t=A((function(){return r.e(52).then(r.bind(null,1040))}));case"0.14.17":default:t=A((function(){return r.e(53).then(r.bind(null,1041))}))}return t.then((function(e){return e.default}))},L=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return r&&n},U=function(e){var t=document.createElement("video");return t.canPlayType&&t.canPlayType(e)};r(152);function N(e){return"captions"===e.kind&&e.cues&&e.cues.length>0||"subtitles"===e.kind}function x(e,t){if(t&&e){var r=t.split("-")[0];return e.toLowerCase()===r.toLowerCase()}}var M,F=r(811),V=r(611),B=r(727),G=r(675);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=1,W=2,Y=3,q=4,z="captions",X="metadata",Z="subtitles",$="disabled",ee="hidden",te="showing",re=function(){function e(t,r,n,i,o){var s=this,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};a()(this,e),l()(this,"onLoadStart",(function(){s.playerRenderPromise||s.dispatchPlayerReady()})),this.domElement=t,this.playerId=r,this.hydraExperienceId=c.hydraExperienceId,this.store=n,this.reload=i,this.showControls=c.showControls,this.objectFitVideo=c.objectFitVideo,this.playerHandlesRotations=c.playerHandlesRotations,this.language=c.language,this.precache=c.precache,this.videoEl=c.videoEl,this.accessibilityLabel=c.accessibilityLabel,this.id3Disabled=!1,this.activeCues={},this.shouldRetryAutoplayMuted=c.shouldRetryAutoplayMuted,this.enablePiP=c.enablePiP||!1,this.enableVideoPlayerCaptionRendering=c.enableVideoPlayerCaptionRendering||!1,this.configBitrateCap=c.bitrateCap,Object(k.d)()||(this.hlsjsVersion=n.dispatch(Object(v.b)(r,G.c)),this.smartBufferingExperimentEnabled=this.store.dispatch(Object(v.b)(this.playerId,G.g)),this.hlsJsSegmentsToPrebuffer=C.c),this.isHlsWorkerEnabled=n.dispatch(Object(v.b)(r,G.d))||!1,this.repositionedCaptionsEnabled=n.dispatch(Object(v.b)(r,G.b)),n.dispatch(Object(v.b)(r,G.e)),this.liveAdDomainRegex=/t.lv.twimg.com$|ton.twitter.com$/,this.logger=o,this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onCanPlay=this.onCanPlay.bind(this),this.onPlay=this.onPlay.bind(this),this.onPlaying=this.onPlaying.bind(this),this.onPause=this.onPause.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),this.onPlaybackRateChange=this.onPlaybackRateChange.bind(this),this.onSeeked=this.onSeeked.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onEnded=this.onEnded.bind(this),this.onError=this.onError.bind(this),this.onHlsJsError=this.onHlsJsError.bind(this),this.onId3CueWithInfo=this.onId3CueWithInfo.bind(this),this.onId3CueWithData=this.onId3CueWithData.bind(this),this.onFragmentLoading=this.onFragmentLoading.bind(this),this.onFragmentParsingInitSegment=this.onFragmentParsingInitSegment.bind(this),this.onLevelSwitching=this.onLevelSwitching.bind(this),this.onLevelLoaded=this.onLevelLoaded.bind(this),this.onBufferAppended=this.onBufferAppended.bind(this),this.onBufferEOS=this.onBufferEOS.bind(this),this.onBufferStart=this.onBufferStart.bind(this),this.onManifestParsed=this.onManifestParsed.bind(this),this.onEnterPictureInPicture=this.onEnterPictureInPicture.bind(this),this.onExitPictureInPicture=this.onExitPictureInPicture.bind(this),this.render=this.render.bind(this),this.dispatchPlayerReady=this.dispatchPlayerReady.bind(this),this.hlsJsPlay=this.hlsJsPlay.bind(this),this.shouldUseBitratePersistence=this.shouldUseBitratePersistence.bind(this),this.handleCueChange=this.handleCueChange.bind(this),this.unsubscribeFromStore=this.store.subscribe(this.render),this.playPromise=Promise.resolve(),this.renderVideoTag(),this.render()}return c()(e,[{key:"teardownPlayer",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.trackDataUsage();var t=this.hlsJs;if(t){t.detachMedia();var r=function(){t.destroy()};this.hlsJs=void 0,this.playPromise.then(r).catch(r)}if(this.videoTag){if(this.stopListeningForId3Tags(),this.videoTag.removeEventListener("timeupdate",this.onTimeUpdate),this.videoTag.removeEventListener("canplay",this.onCanPlay),this.videoTag.removeEventListener("play",this.onPlay),this.videoTag.removeEventListener("playing",this.onPlaying),this.videoTag.removeEventListener("pause",this.onPause),this.videoTag.removeEventListener("volumechange",this.onVolumeChange),this.videoTag.removeEventListener("ratechange",this.onPlaybackRateChange),this.videoTag.removeEventListener("seeked",this.onSeeked),this.videoTag.removeEventListener("seeking",this.onSeeking),this.videoTag.removeEventListener("ended",this.onEnded),this.videoTag.removeEventListener("error",this.onError),this.videoTag.removeEventListener("waiting",this.onBufferStart),this.videoTag.removeEventListener("loadstart",this.onLoadStart),this.videoTag.removeEventListener("enterpictureinpicture",this.onEnterPictureInPicture),this.videoTag.removeEventListener("leavepictureinpicture",this.onExitPictureInPicture),this.videoTag.textTracks){this.videoTag.textTracks.onaddtrack=void 0;for(var n=0;n<this.videoTag.textTracks.length;n++)this.videoTag.textTracks[n].oncuechange&&(this.videoTag.textTracks[n].oncuechange=void 0)}try{this.videoTag.pause(),this.videoTag.removeAttribute("src"),this.videoTag.removeAttribute("poster"),this.videoTag.load()}catch(e){}this.videoTag.parentNode&&this.videoTag.parentNode.removeChild(this.videoTag),this.videoTag=void 0}this.renderedTrackId=void 0,this.hasEndedOnce=!1,this.activeCues=void 0,e&&(this.renderVideoTag(),this.activeCues={})}},{key:"teardown",value:function(){this.teardownPlayer(!1),this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.unsubscribeFromStore()}},{key:"getVideoTag",value:function(){return this.videoTag}},{key:"renderVideoTag",value:function(){this.videoTag=this.videoEl||document.createElement("video"),this.videoTag.setAttribute("preload","none"),this.videoTag.setAttribute("playsinline",""),this.showControls&&this.videoTag.setAttribute("controls",""),this.accessibilityLabel&&this.videoTag.setAttribute("aria-label",this.accessibilityLabel),this.enablePiP||this.videoTag.setAttribute("disablePictureInPicture",""),this.videoTag.style.width="100%",this.videoTag.style.height="100%",this.videoTag.style.position="absolute",this.videoTag.style.backgroundColor="black",this.videoTag.addEventListener("loadstart",this.onLoadStart,!1),this.videoTag.addEventListener("timeupdate",this.onTimeUpdate),this.videoTag.addEventListener("play",this.onPlay),this.videoTag.addEventListener("pause",this.onPause),this.videoTag.addEventListener("volumechange",this.onVolumeChange),this.videoTag.addEventListener("ratechange",this.onPlaybackRateChange),this.videoTag.addEventListener("seeked",this.onSeeked),this.videoTag.addEventListener("seeking",this.onSeeking),this.videoTag.addEventListener("ended",this.onEnded),this.videoTag.addEventListener("error",this.onError),this.videoTag.addEventListener("playing",this.onPlaying),this.videoTag.addEventListener("waiting",this.onBufferStart),this.videoTag.addEventListener("canplay",this.onCanPlay),this.videoTag.addEventListener("enterpictureinpicture",this.onEnterPictureInPicture),this.videoTag.addEventListener("leavepictureinpicture",this.onExitPictureInPicture),this.videoTag.textTracks&&(this.videoTag.textTracks.onaddtrack=this.handleTrackAdded.bind(this)),this.hasEndedOnce=!1}},{key:"onTimeUpdate",value:function(){var e,t,r;if(void 0===this.dateTimeAnchor&&void 0!==this.videoTag.getStartDate){var n=this.videoTag.getStartDate();n&&(this.dateTimeAnchor={streamTimeMs:0,absoluteTimeMs:n.getTime()})}var i,o=1e3*this.videoTag.currentTime;void 0!==this.dateTimeAnchor&&(i=o-this.dateTimeAnchor.streamTimeMs+this.dateTimeAnchor.absoluteTimeMs);var a=0,s=this.videoTag.currentSrc;if(s){var c=this.getCurrentTrack();if(void 0===c)return;var u=c.variants;if(void 0===u)return;for(var l=0;l<u.length;l++)if(u[l].src===s){a=l;break}}this.store.dispatch(Object(S.r)(this.playerId,o,i,1e3*this.videoTag.duration,this.hasCaptions(),a));var d=null===(e=this.hlsJs)||void 0===e?void 0:e.bandwidthEstimate;void 0!==d&&!isNaN(d)&&this.store.dispatch(Object(p.a)(d)),this.trackDataUsage();var f=null===(t=this.getPlayerState())||void 0===t||null===(r=t.controls)||void 0===r?void 0:r.playbackTimeRange;if(f){var h=this.clipScrubTime(f.startTimeS),v=this.clipScrubTime(f.endTimeS),y=window.isFinite(h)&&window.isFinite(v)&&h<v,E=this.videoTag.currentTime<h||this.videoTag.currentTime>v;y&&E&&!this.seeking&&(this.videoTag.currentTime=h)}}},{key:"trackDataUsage",value:function(){var e=this;Object(y.b)(this.playerId,(function(t){var r=t.getAndReset();r>0&&e.store.dispatch(d.N(e.playerId,r))}))}},{key:"checkInitialSeek",value:function(){var e=this.videoTag,t=this.getInitialTimeCode();this.isSeekable(t)&&!this.hasInitialSeeked&&t>-1&&(this.hasInitialSeeked=!0,e.currentTime=t)}},{key:"onCanPlay",value:function(){this.checkInitialSeek(),this.onBufferEnd()}},{key:"onPlay",value:function(){var e=this.videoTag.duration;this.isLooping||this.isLive&&(this.hlsJs?this.hlsJs.liveSyncPosition&&(this.videoTag.currentTime=this.hlsJs.liveSyncPosition):e&&window.isFinite(e)&&(this.videoTag.currentTime=e))}},{key:"onPlaying",value:function(){this.videoTag.paused||(this.isEnded=!1,this.reloadTimecode=void 0,this.store.dispatch(d.ib(this.playerId)),this.onBufferEnd(),this.onTimeUpdate())}},{key:"onPause",value:function(){this.videoTag.ended||this.store.dispatch(d.hb(this.playerId)),this.onBufferEnd()}},{key:"onVolumeChange",value:function(){this.store.dispatch(d.lb(this.playerId,this.videoTag.muted,this.videoTag.volume)),Object(F.b)("volume",this.videoTag.volume)}},{key:"onPlaybackRateChange",value:function(){this.store.dispatch(d.R(this.playerId,this.videoTag.playbackRate))}},{key:"onSeeking",value:function(){this.seeking||this.isLooping||(this.seeking=!0,this.store.dispatch(d.kb(this.playerId))),this.store.dispatch(Object(B.resetGuestState)(this.hydraExperienceId)),this.hasInitialSeeked=!0}},{key:"onSeeked",value:function(){this.seeking=!1,this.isEnded=!1,this.isLooping=!1,this.store.dispatch(d.jb(this.playerId)),this.onBufferEnd(),this.updateRotation()}},{key:"onEnterPictureInPicture",value:function(){this.store.dispatch(d.Q(this.playerId,!0))}},{key:"onExitPictureInPicture",value:function(){this.store.dispatch(d.Q(this.playerId,!1))}},{key:"updateRotation",value:function(){var e,t,r,n=(this.getId3Track()||{}).cues||[],i=n.length,o=this.videoTag.currentTime;for(e=0;e<i&&n[e].startTime<=o;e++)"TXXX"===(t=n[e]).value.key&&"JSONMetadata"===t.value.info&&(r=t);if(r)try{var a=JSON.parse(r.value.data),s=this.normalizeRotation(a.rotation),c=this.getCurrentTrack();void 0!==s&&s!==c.rotation&&this.store.dispatch(Object(S.q)(this.playerId,s))}catch(e){}}},{key:"onEnded",value:function(){this.onBufferEnd(),this.isEnded=this.hasEndedOnce=!0,this.store.dispatch(Object(S.s)(this.playerId));var e=this.getCurrentTrack();if(void 0!==e){var t=e.shouldLoop;if(this.shouldLoop=t,this.shouldLoop){this.isLooping=!0;var r=this.videoTag.play()||Promise.resolve();this.playPromise=r.catch((function(){}))}var n=this.getCurrentTrack(),i=n.isLive,o=n.isLiveTimecode;i&&(o&&this.reload({requestedTimecode:-1,autoPlay:!0}),this.reload()),this.hasInitialSeeked=!1}}},{key:"onHlsJsError",value:function(e,t,r){if(r.fatal){var n=r.response&&r.response.code;this.teardownPlayer(),403===n?"broadcast"===e||"live"===e||"periscope"===e?this.store.dispatch(Object(V.h)(this.playerId,new Error(f.a.LIVE_VIDEO_GEOBLOCK_ERROR))):this.store.dispatch(Object(V.h)(this.playerId,new Error(f.a.MEDIA_GEOBLOCK_ERROR))):(n=n?":".concat(n):"",this.store.dispatch(Object(V.h)(this.playerId,new Error("".concat(r.type,":").concat(r.details).concat(n)))))}}},{key:"onError",value:function(e,t){if(this.videoTag.error){var r;switch(this.videoTag.error.code){case J:r=f.a.MEDIA_ABORTED;break;case W:r=f.a.MEDIA_NETWORK_ERROR;break;case Y:r=f.a.MEDIA_DECODE_ERROR;break;case q:r=f.a.MEDIA_SRC_INVALID_ERROR;break;default:r=f.a.MEDIA_UNKNOWN_CODE_ERROR}this.store.dispatch(Object(V.h)(this.playerId,new Error(r))),this.teardownPlayer()}}},{key:"normalizeRotation",value:function(e){var t=90*Math.floor((Math.floor(e)+45)/90)%360;return 270===t?-90:t}},{key:"isMissingDataProp",value:function(e){var t,r,n=Q(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("TXXX"===i.value.key){t=i;break}}}catch(e){n.e(e)}finally{n.f()}return t&&""===t.value.data&&/\[.*\]|\{.*\}$/.test(t.value.info)}},{key:"onId3CueWithInfo",value:function(e){var t=/(\[|\{)/,r=e.currentTarget.activeCues,n=this.activeCues;this.activeCues={};var i,o=Q(r);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.value,c=s.key,u=s.info,l=[a.startTime,c,u].join("|");if(this.activeCues[l]=!0,!n[l]&&"TXXX"===c){var d=u.search(t);if(-1!==d){var p=u.slice(0,d),f=u.slice(d);this.parseId3Data(p,f)}}}}catch(e){o.e(e)}finally{o.f()}}},{key:"onId3CueWithData",value:function(e){var t=e.currentTarget.activeCues,r=this.activeCues;this.activeCues={};var n,i=[],o=Q(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.value,c=s.key,u=s.info,l=s.data,d=[a.startTime,c,u,l].join("|");this.activeCues[d]=!0,r[d]||("TXXX"===c&&this.parseId3Data(u,l),a.value&&i.push(a.value))}}catch(e){o.e(e)}finally{o.f()}this.store.dispatch(Object(S.m)(this.playerId,i))}},{key:"parseId3Data",value:function(e,t){try{var r=JSON.parse(t);if("JSONMetadata"===e){var n=this.normalizeRotation(r.rotation);this.store.dispatch(Object(S.q)(this.playerId,n)),this.store.dispatch(Object(S.n)(this.playerId,r))}else"HydraAudioLevel"===e?this.store.dispatch(Object(B.updateAudioLevels)(this.hydraExperienceId,r)):"HydraParticipants"===e&&this.store.dispatch(Object(B.updateGuestInfo)(this.hydraExperienceId,r))}catch(e){}}},{key:"onBufferAppended",value:function(e,t){if(0===this.pendingSegments){var r=this.getPlayerState(),n=r.controls,i=r.hasPlaybackStarted,o=r.nextTrackIds,a=(null==n?void 0:n.playState)===d.n.PLAY_REQUESTED;if(this.bufferedSegments+=1,!i&&!a&&this.hlsJs){this.prebufferedSegments+=1;var s=o&&0!==o.length;this.prebufferedSegments!==this.expectedSegments||s?(this.prebufferedSegments===C.c||this.prebufferedSegments===this.expectedSegments&&s)&&(this.maximumBufferLength=this.hlsJs.config.maxMaxBufferLength=0,this.store.dispatch(Object(w.f)(this.playerId,w.a.PREBUFFERING_COMPLETED,0))):this.store.dispatch(Object(w.f)(this.playerId,w.a.BUFFERING_COMPLETED))}}this.pendingSegments=null==t?void 0:t.pending}},{key:"onBufferEOS",value:function(e,t){var r=this.getPlayerState(),n=r.bufferingStatus,i=r.nextTrackIds,o=n===w.a.BUFFERING_COMPLETED,a=i&&0!==i.length;this.bufferedSegments!==this.expectedSegments||o||a||!this.hlsJs||this.store.dispatch(Object(w.f)(this.playerId,w.a.BUFFERING_COMPLETED))}},{key:"onFragmentLoading",value:function(e,t){void 0!==t&&void 0!==t.frag&&t.frag.programDateTime&&(this.dateTimeAnchor={streamTimeMs:1e3*t.frag.start,absoluteTimeMs:ne(t.frag.programDateTime)})}},{key:"onFragmentParsingInitSegment",value:function(e,t){if(void 0!==t&&void 0!==t.frag&&void 0!==t.frag.level&&void 0!==this.hlsJs){var r=this.hlsJs.levels[t.frag.level];void 0!==r&&void 0!==r.details&&void 0!==r.details.programDateTime&&void 0!==r.details.fragments&&void 0!==r.details.fragments[0]&&(this.dateTimeAnchor={streamTimeMs:1e3*r.details.fragments[0].start,absoluteTimeMs:ne(r.details.programDateTime)})}}},{key:"onLevelSwitching",value:function(e,t){if(this.hlsJs&&this.hlsJs.levels){var r=this.hlsJs.levels[t.level].bitrate;void 0!==r&&this.store.dispatch(Object(S.h)(this.playerId,r))}}},{key:"onLevelLoaded",value:function(e,t){if(this.hlsJs&&!this.maximumBufferLength){var r,n,i,o=null==t||null===(r=t.details)||void 0===r?void 0:r.targetduration;if(this.expectedSegments=null==t||null===(n=t.details)||void 0===n||null===(i=n.fragments)||void 0===i?void 0:i.length,o){var a=o*this.hlsJsSegmentsToPrebuffer;this.maximumBufferLength=this.hlsJs.config.maxMaxBufferLength=a,this.store.dispatch(Object(w.g)(this.playerId,o))}}}},{key:"onBufferStart",value:function(){var e=this,t=!this.hasEndedOnce||this.videoTag&&this.videoTag.currentTime>=2;this.shouldLoop&&!t||(this.buffering=!0,setTimeout((function(){e.buffering&&e.store.dispatch(Object(S.j)(e.playerId))}),20))}},{key:"onBufferEnd",value:function(){this.buffering&&(this.buffering=!1,this.store.dispatch(Object(S.i)(this.playerId)))}},{key:"getCaptionsTrack",value:function(e){var t=e||this.videoTag.textTracks||[],r=this.language;return r?function(e,t){for(var r,n,i=e.length,o=0;o<i;o++){var a=e[o],s=a.language;if(N(a)){if(s&&t&&s.toLowerCase()===t.toLowerCase())return a;!n&&x(s,t)?n=a:r||s||(r=a)}}return n||r}(t,r):function(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];if(N(n))return n}}(t)}},{key:"getSubtitlesTrack",value:function(){return this.getCaptionsTrack(function(e){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];"captions"!==i.kind&&r.push(i)}return r}(this.videoTag.textTracks))}},{key:"getId3Track",value:function(){for(var e=0;e<this.videoTag.textTracks.length;e++){var t=this.videoTag.textTracks[e];if(t.kind===X)return t}}},{key:"handleTrackAdded",value:function(e){var t=e.track,r=z,n=X,i=Z;if(t.kind===n)this.startListeningForId3Tags();else{var o=t===this.clonedTextTrack;(!this.repositionedCaptionsEnabled||this.repositionedCaptionsEnabled&&!o&&this.enableVideoPlayerCaptionRendering)&&(t.mode=t.kind===r?ee:$)}!Object(k.d)()||t.kind!==r&&t.kind!==i||(this.id3Disabled=!0,this.stopListeningForId3Tags()),t.kind!==r&&t.kind!==i||(t.oncuechange=this.handleCueChange)}},{key:"handleCueChange",value:function(e){var t,r,n=this,o=e.target,a=o&&o.activeCues&&i()(o.activeCues);a&&this.store.dispatch(Object(S.g)(this.playerId,a));var s=o===this.selectedTextTrack,c=o.cues.length===(null===(t=this.clonedTextTrack)||void 0===t||null===(r=t.cues)||void 0===r?void 0:r.length);if(this.repositionedCaptionsEnabled&&this.clonedTextTrack&&s&&!c&&this.enableVideoPlayerCaptionRendering&&a){for(var u=function(e){var t=n.clonedTextTrack.activeCues[e],r=t.endTime,i=t.startTime,a=t.text;Object.keys(o.activeCues).some((function(e){return o.activeCues[e].startTime===i&&o.activeCues[e].text===a&&o.activeCues[e].endTime===r}))||n.clonedTextTrack.removeCue(n.clonedTextTrack.activeCues[e])},l=0;l<this.clonedTextTrack.activeCues.length;l++)u(l);for(var d=function(e){var t=o.activeCues[e],r=t.startTime,i=t.endTime,a=t.text,s=n.clonedTextTrack.activeCues;if(!Object.keys(s).some((function(e){return s[e].startTime===r&&s[e].text===a}))){var c=new VTTCue(r,i,a);Object(k.b)()?c.line=C.a.Firefox:Object(k.d)()?c.line=C.a.Safari:c.line=C.a.Default,n.clonedTextTrack.addCue(c)}},p=0;p<o.activeCues.length;p++)d(p)}}},{key:"startListeningForId3Tags",value:function(){var e=this.getId3Track();if(void 0!==e&&!this.id3Disabled){var t=e.cues;void 0===this.missingDataProp&&t&&(this.missingDataProp=this.isMissingDataProp(t)),e.oncuechange=this.missingDataProp?this.onId3CueWithInfo:this.onId3CueWithData,e.mode=ee}}},{key:"stopListeningForId3Tags",value:function(){var e=this.getId3Track();void 0!==e&&(e.oncuechange=null,e.mode=$)}},{key:"handleControlUpdate",value:function(e){var t=this;switch(e.muteState){case d.j.MUTE_REQUESTED:this.videoTag.muted=!0;break;case d.j.UNMUTE_REQUESTED:this.videoTag.muted=!1}switch(e.playState){case d.n.PAUSE_REQUESTED:var r=function(){t.videoTag&&(t.videoTag.pause(),t.stopListeningForId3Tags())};this.videoTag.paused?r():this.playPromise.then(r);break;case d.n.PLAY_REQUESTED:var n=this.hlsJs?this.hlsJsPlay():this.videoTag.play()||Promise.resolve();this.playPromise=n.catch((function(e){t.videoTag&&t.videoTag.paused&&(t.shouldRetryAutoplayMuted&&e instanceof DOMException&&"NotAllowedError"===e.name?(t.shouldRetryAutoplayMuted=!1,t.store.dispatch(d.U(t.playerId))):t.store.dispatch(d.I(t.playerId)))})),this.startListeningForId3Tags()}if(e.captionsState&&this.hasCaptions()&&this.videoTag.readyState>=2){var i=this.getCaptionsTrack();switch(e.captionsState){case d.f.CAPTIONS_ON_REQUESTED:if(this.isUserRequestedCaptions()){if(this.repositionedCaptionsEnabled){if(this.repositionedCaptionsEnabled&&this.enableVideoPlayerCaptionRendering){if(this.selectedTextTrack||(this.selectedTextTrack=i),i.kind===Z&&(i.mode=ee),Object(k.d)()){var o,a=Q(this.videoTag.textTracks);try{for(a.s();!(o=a.n()).done;){var s=o.value;s!==this.selectedTextTrack&&(s.mode=$)}}catch(e){a.e(e)}finally{a.f()}}this.clonedTextTrack||(this.clonedTextTrack=this.videoTag.addTextTrack(i.kind)),this.clonedTextTrack.mode=te}}else i.mode=te;this.store.dispatch(d.M(this.playerId,!0))}else{var c=this.getSubtitlesTrack();c&&(this.repositionedCaptionsEnabled?this.repositionedCaptionsEnabled&&this.enableVideoPlayerCaptionRendering&&(this.selectedTextTrack||(this.selectedTextTrack=c),this.clonedTextTrack||(this.clonedTextTrack=this.videoTag.addTextTrack(c.kind)),c.mode=ee,this.clonedTextTrack.mode=te):c.mode=te,this.store.dispatch(d.M(this.playerId,!0)))}break;case d.f.CAPTIONS_OFF_REQUESTED:i.mode=i.kind===z?ee:$,this.repositionedCaptionsEnabled&&this.clonedTextTrack&&this.enableVideoPlayerCaptionRendering&&(this.clonedTextTrack.mode=this.clonedTextTrack.kind===z?ee:$),this.store.dispatch(d.M(this.playerId,!1))}}if(!this.seeking){var u=this.clipScrubTime(this.videoTag.duration*e.scrubToFraction);window.isFinite(u)&&(this.videoTag.currentTime=u)}if(e.volume>=0&&(this.videoTag.volume=e.volume),e.playbackRate)try{this.videoTag.playbackRate=e.playbackRate}catch(e){this.store.dispatch(Object(V.i)(this.playerId))}switch(e.pipState){case d.m.PICTURE_IN_PICTURE_ON_REQUESTED:var l=document.pictureInPictureEnabled;this.videoTag.hasAttribute("disablePictureInPicture")&&this.videoTag.removeAttribute("disablePictureInPicture"),l&&this.videoTag&&!this.inProgressPiPRequest&&(this.inProgressPiPRequest=this.videoTag.requestPictureInPicture().catch((function(){t.store.dispatch(Object(V.h)(t.playerId,new Error(f.a.PICTURE_IN_PICTURE_ERROR)))})).finally((function(){t.inProgressPiPRequest=void 0})));break;case d.m.PICTURE_IN_PICTURE_OFF_REQUESTED:document.pictureInPictureElement&&!this.inProgressPiPRequest&&(this.inProgressPiPRequest=document.exitPictureInPicture().catch((function(){t.store.dispatch(Object(V.h)(t.playerId,new Error(f.a.PICTURE_IN_PICTURE_ERROR)))})).finally((function(){t.inProgressPiPRequest=void 0})))}}},{key:"clipScrubTime",value:function(e){return Math.max(0,Math.min(this.videoTag.duration-.5,e))}},{key:"hlsJsPlay",value:function(){var e=this;return new Promise((function(t){if(e.videoTag&&(e.videoTag.readyState>=3||e.isEnded))t();else{e.videoTag.addEventListener("canplay",(function r(){e.videoTag&&e.videoTag.readyState>=3&&(t(),e.videoTag.removeEventListener("canplay",r))}))}})).then((function(){return e.checkInitialSeek(),e.videoTag.play()||Promise.resolve()}))}},{key:"xhrSetup",value:function(e,t,r){var n=new _.a(t).getHostname(),i=n&&this.liveAdDomainRegex.test(n),o=r===M.ResourceTypes.KEY;(i||o)&&(e.withCredentials=!0)}},{key:"hasCaptions",value:function(){return void 0!==this.getCaptionsTrack()}},{key:"renderVideoVariant",value:function(){var e=this.getCurrentTrack(),t=e.contentType,r=e.variants,n=this.getPlayerState().features.bitrateCap,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enableSafariMse,n=void 0!==r&&r,i=e.find((function(e){return 0===e.type.indexOf("video/mp4")})),o=e.find((function(e){return 0===e.type.indexOf(D)}));if(!o)return{useMse:!1,selectedVariant:i};var a=U(D),s=L();if(Object(k.d)()&&s&&!n&&(s=!1),s)return{useMse:!0,selectedVariant:o};var c=a?o:i;return{useMse:!1,selectedVariant:c}}(r),o=i.useMse,a=i.selectedVariant;return a?o?this.renderHlsJs(a,this.configBitrateCap||n,t):this.renderHtml5(a):(this.store.dispatch(Object(V.h)(this.playerId,new Error(f.a.MEDIA_NOT_SUPPORTED))),Promise.resolve())}},{key:"renderHlsJs",value:function(e,t,r){var n=this,i=this.getInitialTimeCode();this.bufferedSegments=this.expectedSegments=this.pendingSegments=this.prebufferedSegments=0;var o=this.store.dispatch(Object(v.b)(this.playerId,G.f));return j(this.hlsjsVersion).then((function(s){M=s;var c,u,d={autoStartLoad:!0,enableWorker:n.isHlsWorkerEnabled,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,fragLoadingTimeOut:2e4,levelLoadingMaxRetry:4,levelLoadingTimeOut:2e4,loader:(c=n.playerId,u=M,function(e){O()(r,e);var t=R(r);function r(e){var n;a()(this,r);var i=(n=t.call(this,e)).load.bind(g()(n));return n.load=function(e,t,r){var n=r.onSuccess;r.onSuccess=function(e,t,r){Object(y.b)(c,(function(e){e.add(t.total)})),n(e,t,r)},i(e,t,r)},n}return r}(u.DefaultConfig.loader)),manifestLoadingMaxRetry:4,manifestLoadingTimeOut:2e4,maxBufferHole:1.5,maxSeekHole:5,startLevel:-1,startPosition:i,xhrSetup:n.xhrSetup.bind(n),capLevelToPlayerSize:!o&&!t,debug:{trace:function(e){n.logger.log("HlsJs.trace",e)},debug:function(e){n.logger.log("HlsJs.debug",e)},log:function(e){n.logger.log("HlsJs.log",e)},warn:function(e){n.logger.log("HlsJs.warn",e)},info:function(e){n.logger.log("HlsJs.info",e)},error:function(e){n.logger.log("HlsJs.error",e)}}};n.hlsJs=new M(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},d)),n.smartBufferingExperimentEnabled&&(n.hlsJs.on(M.Events.BUFFER_APPENDED,n.onBufferAppended),n.hlsJs.on(M.Events.BUFFER_EOS,n.onBufferEOS)),n.hlsJs.on(M.Events.ERROR,n.onHlsJsError.bind(n,r)),n.hlsJs.on(M.Events.FRAG_LOADING,n.onFragmentLoading),n.hlsJs.on(M.Events.FRAG_PARSING_INIT_SEGMENT,n.onFragmentParsingInitSegment),n.hlsJs.on(M.Events.LEVEL_SWITCHING,n.onLevelSwitching),n.hlsJs.on(M.Events.LEVEL_LOADED,n.onLevelLoaded),n.hlsJs.on(M.Events.MANIFEST_PARSED,n.onManifestParsed.bind(n,t)),n.repositionedCaptionsEnabled&&n.enableVideoPlayerCaptionRendering&&(n.hlsJs.subtitleDisplay=!1),n.hlsJs.attachMedia(n.videoTag),n.hlsJs.loadSource(e.src),n.store.dispatch(Object(S.l)(n.playerId))})).catch((function(){n.store.dispatch(Object(V.h)(n.playerId,new Error("".concat(f.a.CONFIG_NETWORK_ERROR,":HlsJsChunk"))))}))}},{key:"renderHtml5",value:function(e){return this.videoTag.setAttribute("preload",this.precache?"auto":"none"),this.videoTag.setAttribute("src",e.src),this.videoTag.setAttribute("type",e.type),Promise.resolve()}},{key:"onManifestParsed",value:function(e,t,r){var n,i=r.levels,o=i.length;if(e){var a;for(a=1;a<i.length&&!(i[a].bitrate>e);a++);this.hlsJs.autoLevelCapping=a-1,o=a-1}var s=null===(n=this.store.getState().allPlayers)||void 0===n?void 0:n.mostRecentBandwidthEst;if(this.shouldUseBitratePersistence()&&void 0!==s){var c,u=o===i.length?i:i.slice(0,o);for(c=1;c<u.length&&!(i[c].bitrate>s);c++);this.hlsJs.startLevel=c-1}this.dispatchPlayerReady()}},{key:"dispatchPlayerReady",value:function(){this.store.dispatch(Object(S.p)(this.playerId))}},{key:"renderContainer",value:function(){var e=document.createElement("div");if(e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="transparent",e.style.overflow="hidden",e.appendChild(this.videoTag),Object(k.c)()){var t=document.createElement("style"),r=document.createTextNode("video::-webkit-media-controls { display: none !important; }");t.appendChild(r),e.appendChild(t)}this.domElement.innerHTML="",this.domElement.appendChild(e)}},{key:"getPlayerState",value:function(){return this.store.getState().players[this.playerId]||{}}},{key:"getCurrentTrack",value:function(){var e=this.getPlayerState();return Object(h.b)(e)}},{key:"getInitialTimeCode",value:function(){var e=this.reloadTimecode;if(void 0===this.getCurrentTrack())return-1;var t=this.getCurrentTrack(),r=t.isLive,n=t.isLiveTimecode,i=[e,t.requestedTimecode,t.replayEditedStartTime].find((function(e){return e>0||0===e}));return r&&!n||void 0===i?-1:i}},{key:"isUserRequestedCaptions",value:function(){return this.getPlayerState().userSpecifiedCaptions}},{key:"isSeekable",value:function(e){if(0===e||e>0)for(var t=this.videoTag.seekable,r=t.length,n=0;n<r;n++)if(t.start(n)<=e&&e<=t.end(n))return!0;return!1}},{key:"cleanupVideoElement",value:function(){if(this.hasCaptions()){var e=this.getCaptionsTrack();if(Array.isArray(e.cues))for(;e.cues.length;)e.removeCue(e.cues[0])}}},{key:"render",value:function(){var e=this,t=this.getPlayerState(),r=t.posterImage;if(void 0!==t.currentTrackId)if(t.error)this.teardownPlayer();else{var n=this.getCurrentTrack();if(this.renderedTrackId!==t.currentTrackId){this.cleanupVideoElement(),this.hlsJs&&(this.hlsJs.destroy(),this.hlsJs=void 0),r&&this.videoTag.setAttribute("poster",r);var i=n.isLive,o=n.shouldLoop,a=n.reloadTimecode;i||(this.reloadTimecode=a),this.hasInitialSeeked=!1,this.renderedTrackId=t.currentTrackId,this.playerRenderPromise=this.renderVideoVariant(),this.playerRenderPromise.then((function(){e.renderContainer(),e.isLive=i,e.shouldLoop=o,e.videoTag.volume=Object(F.a)("volume",1)||1,e.playerRenderPromise=void 0}))}if(n.playerReady){var s=t.fullscreen.isFullscreen,c=n.rotation;this.handleControlUpdate(t.controls),this.renderRotationAndScale(c,s)}this.hlsJs&&this.maximumBufferLength!==t.maximumBufferLength&&(this.maximumBufferLength=t.maximumBufferLength,this.hlsJs.config.maxMaxBufferLength=this.maximumBufferLength)}}},{key:"renderRotationAndScale",value:function(e,t){var r=this.videoTag,n=100,i=100,o=0,a=0,s=!1!==this.playerHandlesRotations;if(s&&(90===e||-90===e)){var c=r.parentNode||{},u=c.offsetWidth/c.offsetHeight;isFinite(u)&&(o=(100-(i=100*u))/2,a=(100-(n=100/u))/2)}r.style.width="".concat(n,"%"),r.style.height="".concat(i,"%"),r.style.top="".concat(o,"%"),r.style.left="".concat(a,"%"),s&&(t?(r.style.transform="rotate(".concat(e,"deg) scale(1.005)"),r.style.objectFit="contain"):(r.style.transform="rotate(".concat(e,"deg) scale(1.005)"),r.style.objectFit=this.objectFitVideo))}},{key:"shouldUseBitratePersistence",value:function(){return this.store.dispatch(Object(v.b)(this.playerId,G.a))}}]),e}();function ne(e){return void 0!==e.getTime?e.getTime():e}t.a=re}}]);