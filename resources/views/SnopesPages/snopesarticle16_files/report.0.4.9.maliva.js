SlardarLite.plugin.report=function(){"use strict";var d=function(){return(d=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function l(t,r){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,o,i=n.call(t),u=[];try{for(;(void 0===r||0<r--)&&!(e=i.next()).done;)u.push(e.value)}catch(t){o={error:t}}finally{try{e&&!e.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}var u=function(t){return Object.prototype.toString.call(t)};function a(t){return"[object Array]"===u(t)}var i=" > ",c=3,f=5,s=80;function v(t,r,n,e){if(void 0===r&&(r=0),void 0===n&&(n=0),void 0===e&&(e=[]),t&&r++<f){var o=function(n){if(!n||!n.tagName)return"";var e=n.tagName.toLowerCase();return n.id&&(e+="#"+n.id),n.className&&n.className.split(/\s+/).forEach(function(t){return e+="."+t}),["type","name","title","alt"].forEach(function(t){var r=n.getAttribute(t);r&&(e+="["+t+'="'+r+'"]')}),e}(t);if("html"!==o&&!(1<r&&n+e.length*c+o.length>=s))return e.unshift(o),v(t.parentNode,r,n+o.length,e)}return e.join(i)}function h(t,r){return t=t.config.plugins[r],"object"!=typeof(r=t)||null===r||a(r)?{}:t}function y(r,t){return t&&t.some(function(t){return r.match(t)})}function b(t){var r=document.createElement("a");return r.href=t,{url:r.href,protocol:r.protocol,domain:r.hostname,query:r.search,hash:r.hash,path:r.pathname}}var m=10,p=1e3;function r(){if("object"==typeof window&&("object"==typeof(t=window)&&null!==t))return window;var t}function n(){var t=r()&&r()&&window.location;return t?{url:t.href,protocol:t.protocol.slice(0,-1),domain:t.hostname,path:t.pathname,query:t.search.substring(1)}:{}}function e(r){var t,n,e,o,i,u,a,c,f="https://"+(r.config.domain||w)+_,s=(n=(t={endpoint:f,transport:x}).endpoint,e=t.transport,o=t.size,i=void 0===o?m:o,u=void 0===(t=t.wait)?p:t,a=[],c=0,{getSize:function(){return i},getWait:function(){return u},setSize:function(t){i=t},setWait:function(t){u=t},getEndpoint:function(){return n},send:function(t){a.push(t),a.length>=i&&v.call(this),clearTimeout(c),c=setTimeout(v.bind(this),u)},flush:function(){clearTimeout(c),v.call(this)},getBatchData:function(){return a.length?JSON.stringify({ev_type:"batch",list:a}):""},clear:function(){clearTimeout(c),a=[]}});function v(){a.length&&(e.post({url:n,data:this.getBatchData()}),a=[])}return addEventListener("beforeunload",function(){var t=s.getBatchData();t&&navigator.sendBeacon(f,t)}),r.m=f,function(t){var n,e;(t=r.bs&&t?r.bs(t):t)&&(n=g(E(S(k(t)),r),r.config),e=function(){return s.send(j.build(n))},t.ev_type?e():t.p=function(t){var r=l(t,2),t=r[0],r=r[1];n.ev_type=t,n.payload=r,e()})}}var g=function(t,r){var n={};return n.bid=r.bid,n.pid=r.pid,n.view_id=r.viewId,n.action_id=r.actionId,n.user_id=r.userId,n.device_id=r.deviceId,n.session_id=r.sessionId,n.release=r.release,n.env=r.env,d(d({},t),{extra:d(d({},n),t.extra||{})})},w="mon-va.byteoversea.com",_="/monitor_browser/collect/batch/",k=function(t){var r=d(d({},n()),{timestamp:Date.now(),sdk_version:"0.4.9",sdk_name:"SDK_LITE"});return d(d({},t),{extra:d(d({},r),t.extra||{})})},j={build:function(t){return{ev_type:t.ev_type,payload:t.payload,common:d(d({},t.extra||{}),t.overrides||{})}}},E=function(t,r){var n=r.ctx,r=r.config.context,r=void 0===r?{}:r;return t.extra.context=n?d(d({},r),n.toString()):r,t},S=function(t){var r=navigator.connection;return r&&(t.extra.network_type=r.effectiveType),t},x={post:function(t){var r=new XMLHttpRequest;r.open("POST",t.url),r.send(t.data)},get:function(){}},o=/(cookie|auth|jwt|token|key|ticket|secret|credential|session|password|x-tt-token)/i,O=/(bearer|session)/i,T=function(t,r){return!(!t||!r)&&(o.test(t)||O.test(r))};function q(t){return t.split("\r\n").reduce(function(t,r){return t.concat([r.split(": ")])},[]).reduce(function(t,r){var n=l(r,2),e=n[0],r=n[1],n=void 0===r?"":r;return e&&!T(e,n)?d(d({},t),((r={})[e]=n,r)):t},{})}function N(t){var r=(n=l(t,2))[0],t=n[1],n="<unknown>";try{n=v(t.target||t)}catch(t){}return{category:"ui."+(0===r?"click":"keypress"),message:n,type:"dom",timestamp:t.timeStamp}}var D,L="performance_longtask";function M(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.reduce(function(n,t){return new Headers(t).forEach(function(t,r){return!T(r,t)&&(n[r]=t)}),n},{})}var z=["xmlhttprequest","fetch","beacon"];return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(n,t){return r.reduce(function(t,r){return r(n,t)},t)}}(function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(i,t){return t&&i.s(function(n){function e(t){var t=(r=l(t,2))[0],r=r[1];return(t=o[t])&&t(r,i)}var o=r.reduce(function(t,r){var n=l(r,2),r=n[0],n=n[1];return t[r]=n,t},{});t.u(function(r){if(!a(r))return n(r),void(r.c=function(t){t=e(t);t&&(r.p||n)(t)});var t=e(r);t&&n({ev_type:t[0],payload:t[1]})})})}}([1,function(t,r){var n=l(t,4),e=n[0],o=n[1],i=n[2],u=n[3],a=e.a,c=e.f,f=void 0===c?{}:c,s=e.v,v=e.r,m=e.status,t=e.response,n=h(r,"ajax"),c=n.ignoreUrls,n=n.collectBodyOnError;if(r.m!==s&&!y(s,c)){s=b(s),n=n&&400<=m||void 0;return["http",{api:"ajax",request:d(d({headers:f,method:a},s),{timestamp:o,body:n&&""+v}),response:{status:m||0,timing:u,timestamp:o+i,is_custom_error:!1,headers:q(e.getAllResponseHeaders()),body:n&&""+t},duration:i}]}}],[3,function(t){return["performance",d({type:"perf"},t)]}],[2,function(t,r){var n=l(t,2),e=n[0],t=n[1],o=(n=e).reason||n.detail&&n.detail.reason||n.error;n=o,/\[object (Error|Exception|DOMException)\]/.test(u(n))||n instanceof Error||"string"==typeof(o="[object Object]"===u(o)?{message:JSON.stringify(o)}:o)&&(o={message:o});var i,n=h(r,"jsError"),r=n.ignoreErrors,n=n.dedupe;if(o&&!y(o.message,r))return i=o,o=["message","name","fileName","lineNumber","columnNumber","stack","stacktrace","framesToPop"].reduce(function(t,r){return t[r]=i[r],t},{}),!1===n||!D||["stack","message"].some(function(t){return o[t]!==D[t]})?["js_error",{error:D=o,timestamp:e.timeStamp,breadcrumbs:t&&t.map(N)||[]}]:void 0}],[0,function(t,r){var n=l(t,4),e=n[0],o=n[1],i=n[2],u=n[3],t=b(i),n=h(r,"resourceError"),r=n.ignoreUrls,n=n.includeUrls;if(!(n&&!y(i,n)||y(i,r)))return["resource_error",d(d({type:e},t),{url:i,timing:u,timestamp:o})]}],[4,function(t){t=l(t,2);return["pageview",{pid:t[0],source:t[1]}]}],[5,function(t){t=l(t,1)[0];return["performance_timing",{timing:performance.timing,navigation_timing:performance.getEntriesByType("navigation")[0],isBounced:t}]}],[6,function(t,r){r=r.config.sample;return!((!r||!r.rules[L])&&Math.random()<.01)&&[L,{type:"perf",longtasks:t}]}],[7,function(t,r){var n=l(t,6),e=n[0],o=n[1],i=n[2],u=n[3],a=n[4],c=n[5],f=(p=e).url||p,s=o||{},v=s.method,m=s.headers,t=s.body,n=a||{},p=n.headers,o=n.status,s=void 0===o?0:o,a=n.body,o=h(r,"fetch"),n=o.ignoreUrls,o=o.collectBodyOnError;if(f.match(/^(https?:|\/)/)&&r.m!==f&&!y(f,n)){f=b(f),o=o&&400<=s||void 0,t=o&&""+(e.body||t),a=o&&""+a;return["http",{api:"fetch",request:d(d({headers:M(e.headers,m),method:(e.method||v||"get").toLowerCase()},f),{timestamp:i,body:t}),response:{status:s,timing:c,timestamp:i+u,is_custom_error:!1,headers:M(p),body:a},duration:u}]}}],[8,function(t,r){return!z.includes(t.initiatorType)&&!y(t.name,h(r,"resource").ignoreUrls)&&["resource",t]}],[9,function(t){t=l(t,3);return["blank_screen",{timestamp:t[0],score:t[1],screenshot:t[2]}]}]),function(o,t){var r=o.plugin.sample;return r?r(o,t):t&&o.s(function(r){var n=new o.$,e=0;t.u(function(t){e||(o.h("sample",!!o.config.sample)(o,n).u(r),e=1),n.n(t)})})},function(t,r){var n=e(t);t.sender=n,r&&r.u(n)})}();
